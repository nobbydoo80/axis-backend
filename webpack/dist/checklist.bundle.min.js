!function(modules){function webpackJsonpCallback(data){for(var moduleId,chunkId,chunkIds=data[0],moreModules=data[1],executeModules=data[2],i=0,resolves=[];i<chunkIds.length;i++)chunkId=chunkIds[i],Object.prototype.hasOwnProperty.call(installedChunks,chunkId)&&installedChunks[chunkId]&&resolves.push(installedChunks[chunkId][0]),installedChunks[chunkId]=0;for(moduleId in moreModules)Object.prototype.hasOwnProperty.call(moreModules,moduleId)&&(modules[moduleId]=moreModules[moduleId]);for(parentJsonpFunction&&parentJsonpFunction(data);resolves.length;)resolves.shift()();return deferredModules.push.apply(deferredModules,executeModules||[]),checkDeferredModules()}function checkDeferredModules(){for(var result,i=0;i<deferredModules.length;i++){for(var deferredModule=deferredModules[i],fulfilled=!0,j=1;j<deferredModule.length;j++){var depId=deferredModule[j];0!==installedChunks[depId]&&(fulfilled=!1)}fulfilled&&(deferredModules.splice(i--,1),result=__webpack_require__(__webpack_require__.s=deferredModule[0]))}return result}var installedModules={},installedChunks={3:0},deferredModules=[];function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="";var jsonpArray=window.webpackJsonp=window.webpackJsonp||[],oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback,jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;deferredModules.push([302,1]),checkDeferredModules()}({302:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var ng_redux=__webpack_require__(47),lib=__webpack_require__(5),lib_default=__webpack_require__.n(lib),STORE_MULTIPLE_CHOICE_ANSWER="STORE_MULTIPLE_CHOICE_ANSWER",REMOVE_MULTIPLE_CHOICE_ANSWER="REMOVE_MULTIPLE_CHOICE_ANSWER",STORE_OPEN_ANSWER="STORE_OPEN_ANSWER",REMOVE_OPEN_ANSWER="REMOVE_OPEN_ANSWER",RECEIVE_ANSWERS="RECEIVE_ANSWERS",RECEIVE_RELATED_ANSWERS="RECEIVE_RELATED_ANSWERS",DELETE_ANSWER="DELETE_ANSWER",UPDATE_COMMENT="UPDATE_COMMENT",STORE_DOCUMENT="STORE_DOCUMENT",STORE_DOCUMENTS_SHELL="STORE_DOCUMENTS_SHELL",REMOVE_DOCUMENT="REMOVE_DOCUMENT",REMOVE_DOCUMENT_SHELL="REMOVE_DOCUMENT_SHELL",ATTACH_DOCUMENT="ATTACH_DOCUMENT",SAVING_ANSWER="SAVING_ANSWER",ANSWER_SAVED="ANSWER_SAVED",constants_answers={STORE_MULTIPLE_CHOICE_ANSWER:STORE_MULTIPLE_CHOICE_ANSWER,REMOVE_MULTIPLE_CHOICE_ANSWER:REMOVE_MULTIPLE_CHOICE_ANSWER,STORE_OPEN_ANSWER:STORE_OPEN_ANSWER,REMOVE_OPEN_ANSWER:REMOVE_OPEN_ANSWER,RECEIVE_ANSWERS:RECEIVE_ANSWERS,RECEIVE_RELATED_ANSWERS:RECEIVE_RELATED_ANSWERS,DELETE_ANSWER:DELETE_ANSWER,UPDATE_COMMENT:UPDATE_COMMENT,STORE_DOCUMENT:STORE_DOCUMENT,STORE_DOCUMENTS_SHELL:STORE_DOCUMENTS_SHELL,REMOVE_DOCUMENT:REMOVE_DOCUMENT,REMOVE_DOCUMENT_SHELL:REMOVE_DOCUMENT_SHELL,ATTACH_DOCUMENT:ATTACH_DOCUMENT,SAVING_ANSWER:SAVING_ANSWER,ANSWER_SAVED:ANSWER_SAVED},SET_INTERACTION_SETTING="SET_INTERACTION_SETTING",SET_SETTING="SET_SETTING",constants_interactions={SET_INTERACTION_SETTING:SET_INTERACTION_SETTING,SET_SETTING:SET_SETTING,CLIENT_ERROR:"CLIENT_ERROR",SERVER_ERROR:"SERVER_ERROR",REMOVE_ERROR:"REMOVE_ERROR"},REQUEST_QUESTIONS="REQUEST_QUESTIONS",RECEIVE_QUESTIONS="RECEIVE_QUESTIONS",ORDER_QUESTIONS="ORDER_QUESTIONS",SET_FILTER_STRING="SET_FILTER_STRING",SET_FILTER_CHECKBOX="SET_FILTER_CHECKBOX",constants_questions={REQUEST_QUESTIONS:REQUEST_QUESTIONS,RECEIVE_QUESTIONS:RECEIVE_QUESTIONS,ORDER_QUESTIONS:ORDER_QUESTIONS,SELECT_QUESTION:"SELECT_QUESTION",SET_FILTER_STRING:SET_FILTER_STRING,SET_FILTER_CHECKBOX:SET_FILTER_CHECKBOX},constants_sections={REQUEST_SECTIONS:"REQUEST_SECTIONS",RECEIVE_SECTIONS:"RECEIVE_SECTIONS"};var entities={RECEIVE_EEP_PROGRAM:"RECEIVE_EEP_PROGRAM",RECEIVE_CHECKLIST:"RECEIVE_CHECKLIST",DISCARD_PROGRAM:"DISCARD_PROGRAM",DISCARD_CHECKLISTS:"DISCARD_CHECKLISTS",DISCARD_QUESTIONS:"DISCARD_QUESTIONS",CLEAR_ENTITIES:"CLEAR_ENTITIES"};function entitiesActions($q,$http){return{fetchPrograms:function(){return function(dispatch,getState){return getState().settings.eepProgramIds.map(function(eepId){return $http.get("/api/v2/eep_program/".concat(eepId,"/")).then(function(response){return response.data}).then(function(program){dispatch(function(program){return{type:entities.RECEIVE_EEP_PROGRAM,payload:{program:program}}}(program)),dispatch(function(checklistIds){return function(dispatch){return checklistIds.map(function(checklistId){return $http.get("/api/v2/checklists/".concat(checklistId,"/")).then(function(response){return response.data}).then(function(checklist){dispatch(function(checklist){return{type:entities.RECEIVE_CHECKLIST,payload:{checklist:checklist}}}(checklist)),dispatch(function(sections){return{type:constants_sections.RECEIVE_SECTIONS,payload:{sections:sections}}}(checklist.sections))})})}}(program.required_checklists))})})}},matchPrograms:function(programIds){return function(dispatch,getState){dispatch({type:entities.CLEAR_ENTITIES});var _questionActions=questionActions($q,$http);programIds.sort().forEach(function(programId){return dispatch(_questionActions.externalFetchQuestions(programId))})}}}}var es=__webpack_require__(3);function _toConsumableArray(arr){return function(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var visibleQuestionsSelector=es.a.apply(void 0,[function(state){return state.entities.questions},function(state){return state.entities.sections},function(state){return state.entities.eepPrograms},function(state){return state.entities.checklists},function(state){return state.filters},function(state){return state.settings.display.splitQuestionsByProgram}].concat([function(){var questions=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},sections=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},programs=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},checklists=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},filters=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},splitByProgram=5<arguments.length&&void 0!==arguments[5]&&arguments[5],filterTypes=filters.types,filterStates=filters.states,filterSections=filters.sections,filterPrograms=filters.programs;filterSections=function(sections,filterSections){var _ref3;return(_ref3=_).union.apply(_ref3,_toConsumableArray(_.map(function(){var filterSections=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(filterSections).filter(function(key){return filterSections[key]})}(filterSections),function(id){return sections[id].questions})))}(sections,filterSections),filterPrograms=function(programs,filterPrograms,checklists){var _ref,_ref2,activeProgramIds=Object.keys(filterPrograms).filter(function(k){return filterPrograms[k]}),checklistIds=(_ref=[]).concat.apply(_ref,_toConsumableArray(activeProgramIds.map(function(k){return programs[k].required_checklists})));return(_ref2=[]).concat.apply(_ref2,_toConsumableArray(checklistIds.map(function(k){return checklists[k].questions})))}(programs,filterPrograms,checklists);var filteredQuestions=Object.keys(questions).map(function(id){return questions[id]}).filter(function(types,states,sections,programs){return function(question){return!!types[question.type]&&(!(!states.required&&!question.is_optional)&&(!(!states.optional&&question.is_optional)&&(!(!states.answered&&question.answer)&&(!(!states.unanswered&&!question.answer)&&((!sections.length||-1!=sections.indexOf(question.id))&&(!programs.length||-1!=programs.indexOf(question.id)))))))}}(filterTypes,filterStates,filterSections,filterPrograms)).sort(function(a,b){var priority=a.priority-b.priority;return 0==priority?a.id-b.id:priority});return Object.keys(programs).length&&Object.keys(checklists).length&&splitByProgram?function(questions,programs,checklists){var indexed=_.indexBy(questions,"id"),temp={};return _.values(programs).map(function(program){var questionList=[];program.required_checklists.map(function(id){return checklists[id]}).map(function(checklist){checklist.questions.map(function(questionId){var question=indexed[questionId];question&&questionList.push(question)})}),questionList.length&&(temp[program.id]=questionList)}),temp}(filteredQuestions,programs,checklists):filteredQuestions}])),visibleQuestionIdsSelector=Object(es.a)(visibleQuestionsSelector,function(visibleQuestions){return _.pluck(visibleQuestions,"id")});var currentQuestion=es.a.apply(void 0,[function(state){return state.router.currentParams.id},function(state){return state.entities.questions}].concat([function(id,questions){return questions[id]}]));var previousQuestionId=es.a.apply(void 0,[visibleQuestionIdsSelector,function(state){return state.router.currentParams.id}].concat([function(questionIds,currentId){var currentIndex=questionIds.indexOf(parseInt(currentId));return 0!==currentIndex&&questionIds[currentIndex-1]}])),nextQuestionId=es.a.apply(void 0,[visibleQuestionIdsSelector,function(state){return state.router.currentParams.id}].concat([function(questionIds,currentId){var currentIndex=questionIds.indexOf(parseInt(currentId));return currentIndex!==questionIds.length-1&&questionIds[currentIndex+1]}]));function getNextQuestionId(state,questionId,skipAnswered){var nextId=nextQuestionId(state);if(!nextId)return questionId;if(!skipAnswered||!state.entities.questions[nextId].answer)return nextId;try{return getNextQuestionId(state,nextId,skipAnswered)}catch(e){return questionId}}function setSetting(key,value){return{type:SET_SETTING,payload:{key:key,value:value}}}function interactionActions(){return{setSetting:setSetting,setInteractionSetting:function(key,value){return function(dispatch,getState){dispatch({type:SET_INTERACTION_SETTING,payload:{key:key,value:value}}),localStorage.setItem("checklist:interaction_settings",JSON.stringify(getState().settings.interactions))}},gotoNextQuestion:function(questionId){return function(dispatch,getState){var state=getState(),nextId=getNextQuestionId(state,questionId,state.settings.interactions.skipAnsweredQuestions);dispatch(Object(lib.stateGo)("checklist.detail",{id:nextId}))}},gotoPreviousQuestion:function(questionId){return function(dispatch,getState){var previousId=function(state){return previousQuestionId(state)}(getState());dispatch(Object(lib.stateGo)("checklist.detail",{id:previousId}))}},setInteractionSettingVisibility:function(value){return{type:void 0,payload:{value:value}}},setFilterSettingVisibility:function(value){return{type:void 0,payload:{value:value}}}}}function requestingQuestions(){return{type:REQUEST_QUESTIONS}}function receiveQuestions(questions){return{type:RECEIVE_QUESTIONS,payload:{questions:questions}}}function orderQuestions(questions,order_by){return{type:ORDER_QUESTIONS,payload:{questions:questions,order_by:order_by}}}function questionActions($q,$http){function saveToLocalStorage(fn){return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return function(dispatch,getState){dispatch(fn.apply(void 0,args)),localStorage.setItem("checklist:filter_settings",JSON.stringify(getState().filters))}}}return{fetchQuestions:function(urls){return function(dispatch,getState){if(urls.length){dispatch(requestingQuestions());var requests=urls.map(function(url){return $http.get(url).then(function(response){return response.data})}),extractObject=utils(dispatch,getState).extractObject;return $q.all(requests).then(function(questionSets){questionSets.map(extractObject("answer",receiveAnswers)).map(extractObject("related_answer",receiveRelatedAnswers)).map(function(questions){return dispatch(receiveQuestions(questions))})}).then(function(){return dispatch(orderQuestions(getState().entities.questions,"priority"))})}}},externalFetchQuestions:function(programId){return function(dispatch,getState){if(programId){dispatch(requestingQuestions());var _utils=utils(dispatch,getState),extractObject=_utils.extractObject,getQuestionsUrl=_utils.getQuestionsUrl;return $http.get(getQuestionsUrl(programId)).then(function(response){return response.data}).then(extractObject("answer",receiveAnswers)).then(extractObject("related_answer",receiveRelatedAnswers)).then(function(questions){return dispatch(receiveQuestions(questions))}).then(function(){return dispatch(orderQuestions(getState().entities.questions,"priority"))}).then(function(){var currIds=getState().settings.eepProgramIds;dispatch(interactionActions().setSetting("eepProgramIds",[].concat(currIds,[programId])))}).then(function(){return dispatch(entitiesActions($q,$http).fetchPrograms())})}}},setSearchString:saveToLocalStorage(function(value){return{type:SET_FILTER_STRING,payload:{value:value}}}),setSearchCheckBox:saveToLocalStorage(function(key,value){return{type:SET_FILTER_CHECKBOX,payload:{key:key,value:value}}})}}function utils(dispatch,getState){function replaceKeyWithId(key){return function(item){var temp=item[key];return item[key]=temp.id,temp}}function hasKey(key){return function(item){return!!item[key]}}return{extractObject:function(key,action){return function(items){var extracted=items.filter(hasKey(key)).map(replaceKeyWithId(key));return extracted.length&&dispatch(action(extracted)),items}},replaceKeyWithId:replaceKeyWithId,hasKey:hasKey,getQuestionsUrl:function(programId){var homeId=getState().settings.homeId;return"/api/v2/checklist/".concat(homeId,"/").concat(programId,"/questions/")}}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}var easyTransform=function(response){return response.data};function receiveAnswers(answers){return{type:RECEIVE_ANSWERS,payload:{answers:answers}}}function receiveRelatedAnswers(answers){return{type:RECEIVE_RELATED_ANSWERS,payload:{answers:answers}}}function updateComment(comment,questionId){return{type:UPDATE_COMMENT,payload:{comment:comment,questionId:questionId}}}function removeDocument(fileName,questionId){return{type:REMOVE_DOCUMENT,payload:{fileName:fileName,questionId:questionId}}}function clientError(error,questionId){return{type:constants_interactions.CLIENT_ERROR,payload:{questionId:questionId,errors:[error.message]}}}function serverError(errors,questionId){return{type:constants_interactions.SERVER_ERROR,payload:{questionId:questionId,errors:errors}}}var MultipleChoiceAnswer=function(){function MultipleChoiceAnswer(answer,choice,question){_classCallCheck(this,MultipleChoiceAnswer),this.answer=answer,this.choice=choice,this.question=question}return _createClass(MultipleChoiceAnswer,[{key:"is_valid",value:function(){if(this.choice.comment_required&&!this.answer.comment)throw new Error("Comment Required");if(this.choice.image_required&&!this.answer.customer_documents.length)throw new Error("Images Required");if(this.choice.document_required&&!this.answer.customer_documents.length)throw new Error("Documents Required")}},{key:"clean",value:function(){return{answer:this.answer.answer,comment:this.answer.comment,customer_documents:this.answer.customer_documents}}}]),MultipleChoiceAnswer}(),OpenAnswer=function(){function OpenAnswer(answer,question){_classCallCheck(this,OpenAnswer),this.answer=answer,this.question=question}return _createClass(OpenAnswer,[{key:"is_valid",value:function(){console.info("No checks for open answers.")}},{key:"clean",value:function(){return{answer:this.answer.answer,comment:this.answer.comment,customer_documents:this.answer.customer_documents}}}]),OpenAnswer}();function storeMultipleChoiceAnswer(answer,questionId){return{type:STORE_MULTIPLE_CHOICE_ANSWER,payload:{answer:answer,questionId:questionId}}}function storeOpenAnswer(answer,questionId){return{type:STORE_OPEN_ANSWER,payload:{answer:answer,questionId:questionId}}}var filters={SET_FILTER_STRING:"SET_FILTER_STRING",SET_TYPE_CHECKBOX:"SET_TYPE_CHECKBOX",SET_STATE_CHECKBOX:"SET_STATE_CHECKBOX",SET_SECTION_CHECKBOX:"SET_SECTION_CHECKBOX",SET_PROGRAM_CHECKBOX:"SET_PROGRAM_CHECKBOX",RESET_FILTERS:"RESET_FILTERS"};function filters_setSearchString(value){return{type:filters.SET_FILTER_STRING,payload:{value:value}}}function setTypeCheckbox(key,value){return{type:filters.SET_TYPE_CHECKBOX,payload:{key:key,value:value}}}function setStateCheckbox(key,value){return{type:filters.SET_STATE_CHECKBOX,payload:{key:key,value:value}}}function setSectionCheckbox(key,value){return{type:filters.SET_SECTION_CHECKBOX,payload:{key:key,value:value}}}function setProgramCheckbox(key,value){return{type:filters.SET_PROGRAM_CHECKBOX,payload:{key:key,value:value}}}function resetFilters(){return{type:filters.RESET_FILTERS}}function checklistActions_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var checklistActions_ChecklistActionsController=function(){function ChecklistActionsController($ngRedux,$scope){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ChecklistActionsController),$scope.$on("$destroy",$ngRedux.connect(this.mapStateToThis.bind(this))(this))}return function(Constructor,protoProps,staticProps){protoProps&&checklistActions_defineProperties(Constructor.prototype,protoProps),staticProps&&checklistActions_defineProperties(Constructor,staticProps)}(ChecklistActionsController,[{key:"saveDisabled",value:function(){return this.isSaveDisabled||this.isSaving}},{key:"mapStateToThis",value:function(state){return{previousDisabled:!1===previousQuestionId(state),nextDisabled:!1===nextQuestionId(state)}}}]),ChecklistActionsController}();var READONLY=window.readonly,QuestionFilters={searchString:"",types:{open:{label:"Open",active:!0},"multiple-choice":{label:"Multiple Choice",active:!0},date:{label:"Date",active:!0},datetime:{label:"Date Time",active:!0},integer:{label:"Whole Number",active:!0},float:{label:"Decimal Number",active:!0},csv:{label:"Comma Separated Value",active:!0},kvfloatcsv:{label:"Key Value Comma Separated Value",active:!0}},states:{required:{label:"Required",active:!0},optional:{label:"Optional",active:!1},answered:{label:"Answered",active:!1},unanswered:{label:"Unanswered",active:!0}},sections:{},programs:{}},QuestionTypeLabels=_.mapValues(QuestionFilters.types,"label"),QuestionStateLabels=_.mapValues(QuestionFilters.states,"label"),INTERACTIONS={autoSubmitMultipleChoice:{active:!1,label:"Submit Multiple Choice Answer when selected"},submitOpenOnEnter:{active:!1,label:"Submit Open field answers on Enter"},autoAdvanceOnAnswer:{active:!1,label:"Advance to next question on Answer"},deferCorrection:{active:!1,label:"Defer any errors"},skipAnsweredQuestions:{active:!1,label:"Skip Questions that already have answers"}},INTERACTION_VALUES=_.mapValues(INTERACTIONS,"active"),INTERACTION_LABELS=_.mapValues(INTERACTIONS,"label"),INTERACTION_ORDER=["autoSubmitMultipleChoice","submitOpenOnEnter","autoAdvanceOnAnswer","deferCorrection","skipAnsweredQuestions"],DISPLAY={qaListColoringEnabled:{active:!0,label:"Color questions in the list to show QA status",canShow:function(state){return _.any(_.pluck(state.entities.eepPrograms,"is_qa_program"))}},showRelatedAnswers:{active:!0,label:"Show related Answers inline when viewing a question",canShow:function(state){return _.any(_.pluck(state.entities.eepPrograms,"is_qa_program"))}},splitQuestionsByProgram:{active:!1,label:"Split questions by the Program they belong to",canShow:function(state){return 1<Object.keys(state.entities.eepPrograms).length}},showRelatedAnswerInQuestionList:{active:!1,label:"Show Related Answer in Question List (default: QA Answer)",canShow:function(state){return _.any(_.pluck(state.entities.eepPrograms,"is_qa_program"))}}},DISPLAY_VALUES=_.mapValues(DISPLAY,"active"),DISPLAY_LABELS=_.mapValues(DISPLAY,"label"),DISPLAY_CAN_SHOW=_.mapValues(DISPLAY,"canShow"),DISPLAY_ORDER=["qaListColoringEnabled","showRelatedAnswers","splitQuestionsByProgram","showRelatedAnswerInQuestionList"],PLACEHOLDERS={open:"Enter Answer",date:"Enter a date",integer:"Enter a Whole Number",float:"Enter a decimal",csv:"Enter Answer",kvfloatcsv:"Enter Answer",text:"Enter Answer",hidden:""},TOOLTIPS={open:"Enter Answer",date:"Enter a date",integer:"Enter a Whole Number",float:"Enter a decimal",csv:"Enter Answer",kvfloatcsv:"Enter Answer",text:"Enter Answer",hidden:""};function checklistApp_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var ChecklistAppController=function(){function ChecklistAppController($ngRedux,QuestionActions,InteractionActions,EntitiesActions){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ChecklistAppController),this.dispatch=$ngRedux.dispatch,this.QuestionActions=QuestionActions,this.InteractionActions=InteractionActions,this.EntitiesActions=EntitiesActions,angular.isArray(this.eepProgramId)||(this.eepProgramId=[this.eepProgramId]),this.initSettings(),this.initData()}return function(Constructor,protoProps,staticProps){protoProps&&checklistApp_defineProperties(Constructor.prototype,protoProps),staticProps&&checklistApp_defineProperties(Constructor,staticProps)}(ChecklistAppController,[{key:"initSettings",value:function(){this.dispatch(this.InteractionActions.setSetting("homeId",this.homeId)),this.dispatch(this.InteractionActions.setSetting("debug",this.debug)),this.dispatch(this.InteractionActions.setSetting("eepProgramIds",this.eepProgramId))}},{key:"initData",value:function(){var _this=this;this.dispatch(this.QuestionActions.fetchQuestions(this.eepProgramId.sort().map(function(id){return _this.getUrl(id)}))),this.dispatch(this.EntitiesActions.fetchPrograms())}},{key:"getUrl",value:function(programId){return"/api/v2/checklist/".concat(this.homeId,"/").concat(programId,"/questions/")}}]),ChecklistAppController}();function getCleanedObject(valuesObj,labelsObj){return function(key){return{key:key,name:labelsObj[key],selected:valuesObj[key]}}}var questionFilters=es.a.apply(void 0,[function(state){return state.filters.types},function(state){return state.filters.states},function(state){return state.filters.sections},function(state){return state.entities.sections},function(state){return state.filters.programs},function(state){return state.entities.eepPrograms}].concat([function(types,states,filterSections,entitiesSections,filterPrograms,entitiesPrograms){return{types:Object.keys(types).map(getCleanedObject(types,QuestionTypeLabels)),states:Object.keys(states).map(getCleanedObject(states,QuestionStateLabels)),sections:Object.keys(entitiesSections).map(getCleanedObject(filterSections,_.mapValues(entitiesSections,"name"))),programs:Object.keys(entitiesPrograms).map(getCleanedObject(filterPrograms,_.mapValues(entitiesPrograms,"name")))}}]));function filterSettings_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function filterSettings_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function filterSettings_createClass(Constructor,protoProps,staticProps){return protoProps&&filterSettings_defineProperties(Constructor.prototype,protoProps),staticProps&&filterSettings_defineProperties(Constructor,staticProps),Constructor}var FilterSettingsController=function(){function FilterSettingsController($ngRedux,FilterActions){filterSettings_classCallCheck(this,FilterSettingsController),this.dispatch=$ngRedux.dispatch,this.FilterActions=FilterActions,this.showing=!0}return filterSettings_createClass(FilterSettingsController,[{key:"resetFilters",value:function(e){e.preventDefault(),this.dispatch(this.FilterActions.resetFilters())}}]),FilterSettingsController}();var filterSettings_SingleFilterController=function(){function SingleFilterController($ngRedux,$scope,FilterActions){filterSettings_classCallCheck(this,SingleFilterController),this.dispatch=$ngRedux.dispatch,this.FilterActions=FilterActions,this.toggleBox=this.createToggleAction(this.getFilterAction(this.lookup)),$scope.$on("$destroy",$ngRedux.connect(questionFilters)(this))}return filterSettings_createClass(SingleFilterController,[{key:"createToggleAction",value:function(action){return function(data){if(data){var key=data.key,selected=data.selected;this.dispatch(action(key,selected))}}}},{key:"getFilterAction",value:function(key){return{types:this.FilterActions.setTypeCheckbox,states:this.FilterActions.setStateCheckbox,sections:this.FilterActions.setSectionCheckbox,programs:this.FilterActions.setProgramCheckbox}[key]}}]),SingleFilterController}();function userSettings_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var userSettings_UserSettingsController=function(){function UserSettingsController($ngRedux,$scope,InteractionActions){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,UserSettingsController),this.dispatch=$ngRedux.dispatch,this.labels=_.assign({},INTERACTION_LABELS,DISPLAY_LABELS),this.InteractionActions=InteractionActions,this.interactionOrder=INTERACTION_ORDER,this.displayOrder=DISPLAY_ORDER,$scope.$on("$destroy",$ngRedux.connect(this.mapStateToThis.bind(this))(this))}return function(Constructor,protoProps,staticProps){protoProps&&userSettings_defineProperties(Constructor.prototype,protoProps),staticProps&&userSettings_defineProperties(Constructor,staticProps)}(UserSettingsController,[{key:"mapStateToThis",value:function(state){var _state$settings=state.settings,interactions=_state$settings.interactions,display=_state$settings.display;return{interactions:interactions,display:display=_.omit(display,function(value,key){return!DISPLAY_CAN_SHOW[key](state)}),showDisplay:!!Object.keys(display).length}}},{key:"toggleSetting",value:function(key,value){this.dispatch(this.InteractionActions.setInteractionSetting(key,!value))}}]),UserSettingsController}();var questionListClasses_inputSelectors=[visibleQuestionsSelector,function(state){return state.entities.answers},function(state){return state.entities.relatedAnswers},function(state){return state.settings.display.qaListColoringEnabled}];var questionListClasses=es.a.apply(void 0,questionListClasses_inputSelectors.concat([function(questions,answers,relatedAnswers,coloringEnabled){var questionColors={},callback=function(answers,relatedAnswers,coloringEnabled,result){return function(item){var klasses=[];coloringEnabled&&item.related_answer?item.answer?answers[item.answer].answer===relatedAnswers[item.related_answer].answer?klasses.push("list-group-item-success"):klasses.push("list-group-item-danger"):klasses.push("list-group-item-info"):item.answer&&klasses.push("disabled pointer-cursor"),result[item.id]=klasses.join(" ")}}(answers,relatedAnswers,coloringEnabled,questionColors);return _.isPlainObject(questions)&&(questions=_.union.apply(null,_.values(questions))),questions.map(callback),questionColors}]));function _slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var questionsStatistics=es.a.apply(void 0,[function(state){return state.entities.questions}].concat([function(questions){var totalQuestions=Object.keys(questions).length,_$partition2=_slicedToArray(_.partition(questions,{is_optional:!1}),2),totalRequired=_$partition2[0],totalOptional=_$partition2[1],remainingRequired=totalRequired.filter(function(q){return!q.answer}),remainingOptional=totalOptional.filter(function(q){return!q.answer});return{totalQuestions:totalQuestions,totalRequiredQuestions:totalRequired.length,totalOptionalQuestions:totalOptional.length,answeredRequiredQuestions:totalRequired.length-remainingRequired.length,answeredOptionalQuestions:totalOptional.length-remainingOptional.length,remainingRequiredQuestions:remainingRequired.length,remainingOptionalQuestions:remainingOptional.length}}]));function questionList_toConsumableArray(arr){return function(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var listControllerState=es.a.apply(void 0,[function(state){return state.entities},function(state){return state.settings},function(state){return state.filters.searchString}].concat([function(entities,settings,searchString){var answers=entities.answers,relatedAnswers=entities.relatedAnswers,temporaryAnswer=entities.temporaryAnswer,errors=entities.errors,eepPrograms=entities.eepPrograms,fetchingQuestions=settings.fetchingQuestions,debug=settings.debug,splitQuestionsByProgram=settings.display.splitQuestionsByProgram;return{answers:answers,relatedAnswers:relatedAnswers,temporaryAnswer:temporaryAnswer,errors:errors,debug:debug,searchString:searchString,eepPrograms:eepPrograms,splitQuestionsByProgram:splitQuestionsByProgram=splitQuestionsByProgram&&1<Object.keys(eepPrograms).length,coloringEnabled:settings.display.qaListColoringEnabled,isFetching:fetchingQuestions}}])),visibleQuestionsCount=Object(es.a)(visibleQuestionsSelector,function(questions){var _ref;return _.isPlainObject(questions)?(_ref=[]).concat.apply(_ref,questionList_toConsumableArray(_.values(questions))).length:questions.length});function questionList_QuestionListController($ngRedux,$scope){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,questionList_QuestionListController),$scope.$on("$destroy",$ngRedux.connect(function(state){return{questions:visibleQuestionsSelector(state)}})(this)),$scope.$on("$destroy",$ngRedux.connect(listControllerState)(this)),$scope.$on("$destroy",$ngRedux.connect(function(state){return{questionColors:questionListClasses(state)}})(this)),$scope.$on("$destroy",$ngRedux.connect(questionsStatistics)(this)),$scope.$on("$destroy",$ngRedux.connect(function(state){return{questionCount:visibleQuestionsCount(state)}})(this)),$scope.$on("$destroy",$ngRedux.connect(function(state){return{answerDisplay:answerDisplaySelector(state)}})(this))}var answerDisplaySelector=es.a.apply(void 0,[function(state){return state.entities.questions},function(state){return state.entities.answers},function(state){return state.entities.relatedAnswers},function(state){return state.settings.display.showRelatedAnswerInQuestionList}].concat([function(){var questions=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},showRelatedAnswerInQuestionList=3<arguments.length&&void 0!==arguments[3]&&arguments[3],key=showRelatedAnswerInQuestionList?"related_answer":"answer",object=showRelatedAnswerInQuestionList?2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}:1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},answerIdsToKeep=_.filter(_.pluck(questions,key)),answersToKeep=_.pick(object,answerIdsToKeep);return _.indexBy(answersToKeep,"question")}]));function questionDetail_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var QuestionDetailController=function(){function QuestionDetailController($ngRedux,$scope,$sce,AnswerActions,InteractionActions){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,QuestionDetailController),this.dispatch=$ngRedux.dispatch,this.trustAsHtml=$sce.trustAsHtml,this.AnswerActions=AnswerActions,this.InteractionActions=InteractionActions,this.data={answer:!1,comment:"",documents:[]},this.initNavigation(),this.callbacks={multipleChoiceAnswerCallback:this.multipleChoiceAnswerCallback.bind(this),openAnswerCallback:this.openAnswerCallback.bind(this)},$scope.$on("$destroy",$ngRedux.connect(this.mapStateToThis.bind(this))(this))}return function(Constructor,protoProps,staticProps){protoProps&&questionDetail_defineProperties(Constructor.prototype,protoProps),staticProps&&questionDetail_defineProperties(Constructor,staticProps)}(QuestionDetailController,[{key:"getAnswer",value:function(state,question){return question.answer?state.entities.answers[question.answer]:state.entities.temporaryAnswer[question.id]?state.entities.temporaryAnswer[question.id]:{answer:!1,comment:"",documents:[]}}},{key:"mapStateToThis",value:function(state){var _state$entities=state.entities,questions=_state$entities.questions,answers=_state$entities.answers,relatedAnswers=_state$entities.relatedAnswers,errors=_state$entities.errors,questionId=state.router.currentParams.id,questionObj=questions[questionId]||{},answerObj=answers[questionObj.answer];errors=errors[questionId];var relatedAnswer=!!questionObj.related_answer&&relatedAnswers[questionObj.related_answer],_state$settings=state.settings,isSaving=_state$settings.savingAnswer,interactionSettings=_state$settings.interactions,debug=_state$settings.debug,showRelatedAnswers=state.settings.display.showRelatedAnswers,answerData=this.getAnswer(state,questionObj);return{question:questionObj,answer:answerObj,data:answerData,isSaveDisabled:this.getIsSaveDisabled(answerData),relatedAnswer:relatedAnswer,errors:errors,interactionSettings:interactionSettings,isSaving:isSaving,showRelatedAnswers:showRelatedAnswers,debug:debug}}},{key:"getIsSaveDisabled",value:function(answer){return!!answer.id||(!answer.answer||0<answer.customer_documents.length&&0<_.filter(answer.customer_documents,function(document){return!!document.isLoading}).length)}},{key:"initNavigation",value:function(){var _this=this;this.gotoNext=function(){return _this.dispatch(_this.InteractionActions.gotoNextQuestion(_this.question.id))},this.gotoPrevious=function(){return _this.dispatch(_this.InteractionActions.gotoPreviousQuestion(_this.question.id))}}},{key:"triggerSave",value:function(){this.dispatch(this.AnswerActions.saveAnswer(this.data,this.question.id))}},{key:"multipleChoiceAnswerCallback",value:function(choice,argument_1){var triggerSave=1<arguments.length&&void 0!==argument_1&&argument_1;this.data.answer=choice.choice,this.selectedChoice=choice,this.dispatch(this.AnswerActions.storeTemporaryAnswer(this.data.answer,this.question,triggerSave))}},{key:"openAnswerCallback",value:function(answer,argument_1){var triggerSave=1<arguments.length&&void 0!==argument_1&&argument_1;this.data.answer=answer,this.dispatch(this.AnswerActions.storeTemporaryAnswer(this.data.answer,this.question,triggerSave))}},{key:"documentCallback",value:function(name,file,extension){this.dispatch(this.AnswerActions.storeDocument({name:name,file:file,extension:extension},this.question.id))}},{key:"removeDocument",value:function(doc){this.dispatch(this.AnswerActions.removeDocument(doc.name,this.question.id))}},{key:"updateComment",value:function(comment){this.data.comment=comment,this.dispatch(this.AnswerActions.updateComment(this.data.comment,this.question.id))}},{key:"retract",value:function(){this.dispatch(this.AnswerActions.retractAnswer(this.answer))}}]),QuestionDetailController}();var redux_thunk_es=__webpack_require__(48),redux_logger=__webpack_require__(49),isHomePage="home"===window.__ExamineSettings.page,checklistList={url:"/",parent:isHomePage?"tabs.checklist":null,views:{detail:{template:isHomePage?'\n    <h4 class="text-center">Please select a question.</h4>\n':'\n    <span ng-controller="ExamineViewController as examineApp">\n        <axis-single-region options="pageRegions.home"></axis-single-region>\n    </span>\n'}}},checklistDetail={url:"question/:id",views:{"detail@":{template:" <question-detail></question-detail> "}}},settings={url:"settings",views:{"detail@":{template:'\n                <div class="row">\n                    <div class="col-xs-12">\n                        <user-settings></user-settings>\n                    </div>\n                </div>\n            '}}},redux=__webpack_require__(7);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var typeDefaults=_.mapValues(QuestionFilters.types,function(n){return n.active}),stateDefaults=_.mapValues(QuestionFilters.states,function(n){return n.active}),defaultState=_.assign({},QuestionFilters,{types:typeDefaults,states:stateDefaults}),defaultStateWithLocalStorage=_.assign({},defaultState,JSON.parse(localStorage.getItem("checklist:filter_settings"))||{});function settings_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var settings_defaultState={showInteractionSettings:!1,showFilterSettings:!1,questionOrder:[],interactions:_.assign({},INTERACTION_VALUES,JSON.parse(localStorage.getItem("checklist:interaction_settings"))||{}),display:_.assign({},DISPLAY_VALUES,JSON.parse(localStorage.getItem("checklist:display_settings"))||{}),baseUrl:"",homeId:0,eepProgramIds:[],readonly:!0,savingAnswer:!1,fetchingQuestions:!1,debug:!1};function temporaryAnswers_toConsumableArray(arr){return function(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function entities_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _extendByKey(currentState,object,argument_2){var key=2<arguments.length&&void 0!==argument_2?argument_2:"id";return _.assign({},currentState,entities_defineProperty({},object[key],object))}var reducers_entities=Object(redux.combineReducers)({questions:function(){var state=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},action=1<arguments.length?arguments[1]:void 0;switch(action.type){case entities.CLEAR_ENTITIES:return{};case constants_questions.RECEIVE_QUESTIONS:return _.assign({},state,_.indexBy(action.payload.questions,"id"));case entities.DISCARD_QUESTIONS:return _.omit(state,action.payload.questionIds);default:return state}},answers:function(){var state=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},action=1<arguments.length?arguments[1]:void 0;switch(action.type){case entities.CLEAR_ENTITIES:return{};case constants_answers.RECEIVE_ANSWERS:return _.assign({},state,_.indexBy(action.payload.answers,"id"));case constants_answers.DELETE_ANSWER:return _.omit(state,action.payload.answerId);case constants_answers.ATTACH_DOCUMENT:var newDocuments=state[action.payload.answerId].customer_documents.concat([action.payload.document]),newAnswer=_.assign({},state[action.payload.answerId],{customer_documents:newDocuments});return _.assign({},state,entities_defineProperty({},action.payload.answerId,newAnswer));default:return state}},sections:function(){var state=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},action=1<arguments.length?arguments[1]:void 0;switch(action.type){case entities.CLEAR_ENTITIES:return{};case constants_sections.RECEIVE_SECTIONS:return _.assign({},state,_.indexBy(action.payload.sections,"id"));default:return state}},temporaryAnswer:function(){var state=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},action=1<arguments.length?arguments[1]:void 0;switch(action.type){case entities.CLEAR_ENTITIES:return{};case constants_answers.STORE_MULTIPLE_CHOICE_ANSWER:case constants_answers.STORE_OPEN_ANSWER:case constants_answers.UPDATE_COMMENT:case constants_answers.STORE_DOCUMENT:case constants_answers.REMOVE_DOCUMENT:case constants_answers.STORE_DOCUMENTS_SHELL:case constants_answers.REMOVE_DOCUMENT_SHELL:var currentTempAnswer=state[action.payload.questionId]||{},updatedQuestion={answer:function(argument_0,argument_1){var state=0<arguments.length&&void 0!==argument_0?argument_0:"",action=1<arguments.length?argument_1:void 0;switch(action.type){case STORE_MULTIPLE_CHOICE_ANSWER:case STORE_OPEN_ANSWER:return action.payload.answer;default:return state}}(currentTempAnswer.answer,action),comment:function(argument_0,argument_1){var state=0<arguments.length&&void 0!==argument_0?argument_0:"",action=1<arguments.length?argument_1:void 0;switch(action.type){case UPDATE_COMMENT:return action.payload.comment;default:return state}}(currentTempAnswer.comment,action),customer_documents:function(argument_0,argument_1){var state=0<arguments.length&&void 0!==argument_0?argument_0:[],action=1<arguments.length?argument_1:void 0;switch(action.type){case STORE_DOCUMENTS_SHELL:return _.uniq([].concat(temporaryAnswers_toConsumableArray(state),[_.assign({},action.payload.file,{isLoading:!0})]));case STORE_DOCUMENT:return _.map(state,function(file){return file.name===action.payload.file.name?_.assign({},file,action.payload.file,{isLoading:!1}):file});case REMOVE_DOCUMENT:case REMOVE_DOCUMENT_SHELL:return state.filter(function(f){return f.name!=action.payload.fileName});default:return state}}(currentTempAnswer.customer_documents,action)};return _.assign({},state,entities_defineProperty({},action.payload.questionId,updatedQuestion));case constants_answers.REMOVE_MULTIPLE_CHOICE_ANSWER:case constants_answers.REMOVE_OPEN_ANSWER:return _.omit(state,action.payload.questionId);default:return state}},errors:function(){var state=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},action=1<arguments.length?arguments[1]:void 0;switch(action.type){case entities.CLEAR_ENTITIES:return{};case constants_interactions.CLIENT_ERROR:case constants_interactions.SERVER_ERROR:return _.assign({},state,entities_defineProperty({},action.payload.questionId,action.payload.errors));case constants_interactions.REMOVE_ERROR:return _.omit(state,action.payload.questionId);default:return state}},relatedAnswers:function(){var state=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},action=1<arguments.length?arguments[1]:void 0;switch(action.type){case entities.CLEAR_ENTITIES:return{};case constants_answers.RECEIVE_RELATED_ANSWERS:return _.assign({},state,_.indexBy(action.payload.answers,"id"));default:return state}},eepPrograms:function(){var state=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},action=1<arguments.length?arguments[1]:void 0;switch(action.type){case entities.CLEAR_ENTITIES:return{};case entities.RECEIVE_EEP_PROGRAM:return _extendByKey(state,action.payload.program);case entities.DISCARD_PROGRAM:return _.omit(state,action.payload.programId);default:return state}},checklists:function(){var state=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},action=1<arguments.length?arguments[1]:void 0;switch(action.type){case entities.CLEAR_ENTITIES:return{};case entities.RECEIVE_CHECKLIST:return _extendByKey(state,action.payload.checklist);case entities.DISCARD_CHECKLISTS:return _.omit(state,action.payload.checklistIds);default:return state}}}),redux_rootReducer=Object(redux.combineReducers)({router:lib.router,filters:function(){var state=0<arguments.length&&void 0!==arguments[0]?arguments[0]:defaultStateWithLocalStorage,action=1<arguments.length?arguments[1]:void 0;switch(action.type){case filters.RESET_FILTERS:var resetSections=_.mapValues(state.sections,function(){return!1});return _.assign({},defaultState,{sections:resetSections});case filters.SET_FILTER_STRING:return _.assign({},state,{searchString:action.payload.value});case filters.SET_TYPE_CHECKBOX:var newTypes=_.assign({},state.types,_defineProperty({},action.payload.key,action.payload.value));return _.assign({},state,{types:newTypes});case filters.SET_STATE_CHECKBOX:var newStates=_.assign({},state.states,_defineProperty({},action.payload.key,action.payload.value));return _.assign({},state,{states:newStates});case constants_sections.RECEIVE_SECTIONS:var sectionIds=_.pluck(action.payload.sections,"id"),temp={};sectionIds.map(function(id){return temp[id]=!1});var newSections=_.assign({},state.sections,temp);return _.assign({},state,{sections:newSections});case filters.SET_SECTION_CHECKBOX:newSections=_.assign({},state.sections,_defineProperty({},action.payload.key,action.payload.value));return _.assign({},state,{sections:newSections});case entities.RECEIVE_EEP_PROGRAM:var program=action.payload.program,newPrograms=_.assign({},state.programs,_defineProperty({},program.id,!1));return _.assign({},state,{programs:newPrograms});case filters.SET_PROGRAM_CHECKBOX:newPrograms=_.assign({},state.programs,_defineProperty({},action.payload.key,action.payload.value));return _.assign({},state,{programs:newPrograms});default:return state}},settings:function(){var state=0<arguments.length&&void 0!==arguments[0]?arguments[0]:settings_defaultState,action=1<arguments.length?arguments[1]:void 0;switch(action.type){case constants_questions.ORDER_QUESTIONS:return _.assign({},state,{questionOrder:function(data){return Object.keys(data.questions).map(function(key){return data.questions[key]}).sort(function(a,b){return a[data.order_by]>b[data.order_by]?1:-1}).map(function(obj){return obj.id})}(action.payload)});case constants_interactions.SET_INTERACTION_SETTING:if(action.payload.key in state.interactions)var update={interactions:_.assign({},state.interactions,settings_defineProperty({},action.payload.key,action.payload.value))};else if(action.payload.key in state.display)update={display:_.assign({},state.display,settings_defineProperty({},action.payload.key,action.payload.value))};return _.assign({},state,update);case constants_interactions.SET_SETTING:return _.assign({},state,settings_defineProperty({},action.payload.key,action.payload.value));case constants_answers.SAVING_ANSWER:return _.assign({},state,{savingAnswer:!0});case constants_answers.ANSWER_SAVED:return _.assign({},state,{savingAnswer:!1});case constants_questions.REQUEST_QUESTIONS:return _.assign({},state,{fetchingQuestions:!0});case constants_questions.RECEIVE_QUESTIONS:return _.assign({},state,{fetchingQuestions:!1});case entities.CLEAR_ENTITIES:return _.assign({},state,{eepProgramIds:[]});default:return state}},entities:reducers_entities}),configs_isHomePage="home"===window.__ExamineSettings.page;function commentField_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var CommentFieldInputController=function(){function CommentFieldInputController($ngRedux,$scope){var _this=this;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CommentFieldInputController),this.displaySetter=function(){return _this.comment=_this.getDisplay($ngRedux.getState())},$scope.$on("$destroy",$scope.$watch(function(){return _this.question.answer},function(){return _this.displaySetter()}))}return function(Constructor,protoProps,staticProps){protoProps&&commentField_defineProperties(Constructor.prototype,protoProps),staticProps&&commentField_defineProperties(Constructor,staticProps)}(CommentFieldInputController,[{key:"getDisplay",value:function(state){return this.question.answer?state.entities.answers[this.question.answer].comment:state.entities.temporaryAnswer[this.question.id]?state.entities.temporaryAnswer[this.question.id].comment:""}}]),CommentFieldInputController}();var currentAnswer_inputSelectors=[currentQuestion,function(state){return state.entities.answers}];var multipleChoiceSelectedChoice_inputSelectors=[currentQuestion,es.a.apply(void 0,currentAnswer_inputSelectors.concat([function(question,answers){return answers[question.answer]}])),function(state){return state.entities.temporaryAnswer}];es.a.apply(void 0,multipleChoiceSelectedChoice_inputSelectors.concat([function(question,answer,temporaryAnswer){if(!question)return{};if(answer)return _.find(question.choices,{choice:answer.answer});if(temporaryAnswer[question.id]){var _answer=temporaryAnswer[question.id].answer;return _.find(question.choices,{choice:_answer})}return{}}]));function multipleChoiceField_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function multipleChoiceField_toConsumableArray(arr){return function(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function multipleChoiceField_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function multipleChoiceField_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function multipleChoiceField_createClass(Constructor,protoProps,staticProps){return protoProps&&multipleChoiceField_defineProperties(Constructor.prototype,protoProps),staticProps&&multipleChoiceField_defineProperties(Constructor,staticProps),Constructor}var MultipleChoiceController=function(){function MultipleChoiceController($ngRedux,$scope,$element,$timeout){var _this=this;multipleChoiceField_classCallCheck(this,MultipleChoiceController),this.$element=$element,this.$timeout=$timeout,this.setSelectedChoice=function(){return _this.selectedChoice=_this.getSelectedChoice($ngRedux.getState())},this.setSelectedChoice(),$scope.$on("$destroy",$ngRedux.subscribe(function(){return _this.setSelectedChoice()})),$scope.$on("$destroy",$scope.$watch(function(){return _this.question},function(){return _this.setSelectedChoice()},!0))}return multipleChoiceField_createClass(MultipleChoiceController,[{key:"isChoiceSelected",value:function(choice){return this.selectedChoice&&this.selectedChoice.id===choice.id}},{key:"getDisplayClass",value:function(choice){return choice.display_as_failure||choice.is_considered_failure?"btn-danger":"btn-success"}},{key:"getSelectedChoice",value:function(state){if(this.answer)return _.find(this.question.choices,{choice:this.answer.answer});if(state.entities.temporaryAnswer[this.question.id]){var answer=state.entities.temporaryAnswer[this.question.id].answer;return _.find(this.question.choices,{choice:answer})}return{}}},{key:"clickHandler",value:function(choice){this.answerCallback({choice:choice})}}]),MultipleChoiceController}(),multipleChoiceField_MultipleChoiceInputController=function(){function MultipleChoiceInputController(){multipleChoiceField_classCallCheck(this,MultipleChoiceInputController),this.getClasses=es.a.apply(void 0,multipleChoiceField_toConsumableArray(this.inputSelectors()).concat([this.classesGetter]))}return multipleChoiceField_createClass(MultipleChoiceInputController,[{key:"inputSelectors",value:function(){var _this2=this;return[function(){return _this2.selectedClass},function(){return _this2.isSelected},function(){return _this2.isDisabled}]}},{key:"classesGetter",value:function(selectedClass,isSelected,isDisabled){var _ref;return multipleChoiceField_defineProperty(_ref={},selectedClass,isSelected),multipleChoiceField_defineProperty(_ref,"disabled",isDisabled),_ref}}]),MultipleChoiceInputController}();function openInputField_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var openInputField_OpenFieldInputController=function(){function OpenFieldInputController($ngRedux,$scope,$element,$timeout){var _this=this;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,OpenFieldInputController),this.placeholder=PLACEHOLDERS[this.question.type]||"",this.tooltip=TOOLTIPS[this.question.type]||"",this.answerSetter=function(){return _this.answer=_this.getDisplay($ngRedux.getState())},$scope.$on("$destroy",$scope.$watchGroup([function(){return _this.question.answer},function(){return _this.question.id}],function(){return _this.answerSetter()})),this.isRelatedAnswer||$timeout(function(){$element.find("input").focus()},0)}return function(Constructor,protoProps,staticProps){protoProps&&openInputField_defineProperties(Constructor.prototype,protoProps),staticProps&&openInputField_defineProperties(Constructor,staticProps)}(OpenFieldInputController,[{key:"getDisplay",value:function(state){var _state$entities=state.entities,temporaryAnswer=_state$entities.temporaryAnswer,answers=_state$entities.answers,relatedAnswers=_state$entities.relatedAnswers;return this.isRelatedAnswer?relatedAnswers[this.question.related_answer].answer:this.question.answer?answers[this.question.answer].answer:temporaryAnswer[this.question.id]?temporaryAnswer[this.question.id].answer:""}}]),OpenFieldInputController}();__webpack_exports__.default=angular.module("checklist",["ui.bootstrap","ui.router",ng_redux.a,lib_default.a]).config(function($urlRouterProvider,$stateProvider){configs_isHomePage||$urlRouterProvider.otherwise("/"),$stateProvider.state("checklist",checklistList).state("checklist.detail",checklistDetail).state("checklist.settings",settings)}).config(function($ngReduxProvider){var logger=Object(redux_logger.createLogger)({level:"info",collapsed:!0});$ngReduxProvider.createStoreWith(redux_rootReducer,["ngUiRouterMiddleware",redux_thunk_es.a,logger,function(store){return function(next){return function(action){var result=next(action);return window.state=store.getState(),window.store=store,result}}}])}).config(function($httpProvider){$httpProvider.defaults.xsrfCookieName="csrftoken",$httpProvider.defaults.xsrfHeaderName="X-CSRFToken"}).service("QuestionActions",questionActions).service("AnswerActions",function($http,$q,InteractionActions){function removeTemporaryAnswer(question){return"multiple-choice"===question.type?function(questionId){return{type:REMOVE_MULTIPLE_CHOICE_ANSWER,payload:{questionId:questionId}}}(question.id):function(questionId){return{type:REMOVE_OPEN_ANSWER,payload:{questionId:questionId}}}(question.id)}function saveAnswer(answerData,questionId){return function(dispatch,getState){var handler,skipAnsweredQuestions,nextId,state=getState(),question=state.entities.questions[questionId],_state$settings$inter=state.settings.interactions,autoAdvanceOnAnswer=_state$settings$inter.autoAdvanceOnAnswer,deferCorrection=_state$settings$inter.deferCorrection;if("multiple-choice"===question.type){var choice=_.find(question.choices,{choice:answerData.answer});handler=new MultipleChoiceAnswer(answerData,choice,question)}else handler=new OpenAnswer(answerData,question);return $q.when().then(function(){return handler.is_valid()}).then(function(){return dispatch({type:SAVING_ANSWER})}).catch(errorHandler(clientError)).then(function(){return function(cleanedData,questionId){var homeId=getState().settings.homeId,data={home:homeId,question:questionId,user:window.user_id,answer:cleanedData.answer,comment:cleanedData.comment};return $http.post("/api/v2/answer/",data).then(easyTransform).catch(errorHandler(serverError))}(handler.clean(),questionId)}).then(function(question){if(dispatch(function(questionId){return{type:constants_interactions.REMOVE_ERROR,payload:{questionId:questionId}}}(question.id)),question.answer){var answer=question.answer;question.answer=answer.id,dispatch(receiveAnswers([answer]))}if(question.related_answer){var relatedAnswer=question.related_answer;question.related_answer=relatedAnswer.id,dispatch(receiveRelatedAnswers([relatedAnswer]))}return dispatch(receiveQuestions([question])),dispatch(removeTemporaryAnswer(question)),question}).then(function(handler){return function(question){var answerModelType=getState().entities.answers[question.answer].model_type,promises=_.map(handler.clean().customer_documents,function(document){return function(document,question,answerModel){return $http.post("/api/v2/".concat(answerModel,"/documents/?machinery=").concat(answerModel),{document_raw:document.raw,document_raw_name:document.name,object_id:question.answer}).then(easyTransform).then(function(doc){return doc.object})}(document,question,answerModelType)});return $q.all(promises).then(function(documents){return documents.map(function(document){return dispatch(function(document,answerId){return{type:ATTACH_DOCUMENT,payload:{document:document,answerId:answerId}}}(document,question.answer))})})}}(handler)).then((skipAnsweredQuestions=state.settings.interactions.skipAnsweredQuestions,nextId=getNextQuestionId(state,questionId,skipAnsweredQuestions),function(){autoAdvanceOnAnswer&&dispatch(Object(lib.stateGo)("checklist.detail",{id:nextId}))})).finally(function(){return dispatch({type:ANSWER_SAVED})});function errorHandler(handler){return function(response){var errors=_.flatten(_.values(response.data));return errors=errors.length?errors:response,dispatch(handler(errors,questionId)),autoAdvanceOnAnswer&&deferCorrection&&dispatch(InteractionActions.gotoNextQuestion(questionId)),$q.reject()}}}}return{storeTemporaryAnswer:function(answer,question){var triggerSave=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return function(dispatch,getState){var isMultipleChoice="multiple-choice"===question.type;dispatch((isMultipleChoice?storeMultipleChoiceAnswer:storeOpenAnswer)(answer,question.id));var state=getState();(triggerSave||isMultipleChoice&&state.settings.interactions.autoSubmitMultipleChoice)&&dispatch(saveAnswer(state.entities.temporaryAnswer[question.id],question.id))}},saveAnswer:saveAnswer,retractAnswer:function(answer){return function(dispatch,getState){return $http.delete(answer.delete_url).then(easyTransform).then(function(question){dispatch(receiveQuestions([question])),dispatch(function(answer){return{type:DELETE_ANSWER,payload:{answerId:answer.id}}}(answer))},function(){console.error("Handle errors for non retractable answers")})}},updateComment:updateComment,storeDocument:function(file,questionId){return function(dispatch,getState){dispatch(function(file,questionId){return{type:STORE_DOCUMENTS_SHELL,payload:{file:file,questionId:questionId}}}(file,questionId));var reader=new FileReader;reader.onload=function(readFile){var raw=readFile.target.result,extension=file.name.split(".").pop();-1<raw.indexOf(":;")?raw=raw.replace(":;",":application/".concat(extension,";")):-1<raw.indexOf("octet-stream")&&(raw=raw.replace("octet-stream",extension)),file.raw=raw,$http.post("/api/v2/answer/documents/validate/",{document:raw}).then(function(){return dispatch(function(file,questionId){return{type:STORE_DOCUMENT,payload:{file:file,questionId:questionId}}}(file,questionId))}).catch(function(response){dispatch(function(fileName,questionId){return{type:REMOVE_DOCUMENT_SHELL,payload:{fileName:fileName,questionId:questionId}}}(file.name,questionId)),dispatch(function(errors,questionId){return{type:constants_interactions.SERVER_ERROR,payload:{questionId:questionId,errors:["Document is invalid"]}}}(response.data,questionId))})},reader.readAsDataURL(file.file)}},removeDocument:removeDocument,stateGo:lib.stateGo}}).service("InteractionActions",interactionActions).service("FilterActions",function(){return{setSearchString:filters_setSearchString,setTypeCheckbox:setTypeCheckbox,setStateCheckbox:setStateCheckbox,setSectionCheckbox:setSectionCheckbox,setProgramCheckbox:setProgramCheckbox,resetFilters:resetFilters}}).service("EntitiesActions",entitiesActions).directive("fileTable",function(){return{scope:{label:"@",acceptedTypes:"@",documents:"=",documentsUploader:"=",relatedDocuments:"=",relatedDocumentsUploader:"=",showRelatedDocuments:"=",canAdd:"=",addCallback:"&",removeCallback:"&"},controller:function(){var _this=this;this.add=function(name,file,extension){_this.addCallback({name:name,file:file,extension:extension})},this.remove=function(doc){_this.removeCallback({doc:doc})}},controllerAs:"table",bindToController:!0,template:"\n        <table class='table table-striped table-bordered'>\n            <thead>\n                <th>\n                    [[ table.label ]]\n                    <i class=\"fa fa-info-circle\" tooltip=\"Accepted File Types: [[table.acceptedTypes]]\"></i>\n                </th>\n                <th>[[ table.canAdd ? 'Delete' : '' ]]</th>\n            </thead>\n            <tbody>\n                <tr file-display ng-if=\"table.showRelatedDocuments\" ng-repeat=\"doc in table.relatedDocuments\" doc=\"doc\" uploaded-by=\"table.relatedDocumentsUploader\"></tr>\n                <tr file-display ng-repeat='doc in table.documents' doc='doc' uploaded-by=\"table.documentsUploader\" remove-callback='table.remove(doc)'></tr>\n                <tr ng-if='!table.canAdd && !table.documents.length' class='text-center'>\n                    <td colspan='2'>No Documents</td>\n                </tr>\n\n                <tr ng-if='table.canAdd'>\n                    <td>\n                        <file-input callback='table.add(name, file, extension)'></file-input>\n                    </td>\n                    <td></td>\n                </tr>\n            </tbody>\n        </table>\n        ",replace:!0}}).directive("checklist",function(){return{scope:{homeId:"=",eepProgramId:"=",debug:"="},controller:ChecklistAppController,controllerAs:"checklist",bindToController:!0,template:'\n        <div class="row">\n            <div class="col-sm-3">\n                <checklist-progress-bar></checklist-progress-bar>\n                <hr>\n                <question-filter-settings></question-filter-settings>\n                <user-settings></user-settings>\n            </div>\n            <div class="col-sm-9">\n                <div ui-view="detail"></div>\n                <hr>\n                <question-list></question-list>\n            </div>\n        </div>\n        '}}).directive("userSettings",function(){return{scope:{},controller:userSettings_UserSettingsController,controllerAs:"ctrl",template:'\n        <h3>User Settings</h3>\n        <div class="panel panel-default">\n            <div class="panel-heading">\n                <h3 class="panel-title">Interaction Settings</h3>\n            </div>\n            <div class="list-group">\n                <label class="list-group-item" ng-repeat="key in ctrl.interactionOrder">\n                    <input type="checkbox" ng-checked="ctrl.interactions[key]" ng-click="ctrl.toggleSetting(key, ctrl.interactions[key])" /> [[ ::ctrl.labels[key] ]]\n                </label>\n            </div>\n            <div class="panel-heading" ng-if="ctrl.showDisplay">\n                <h3 class="panel-title">Display Settings</h3>\n            </div>\n            <div class="list-group" ng-if="ctrl.showDisplay">\n                <label class="list-group-item" ng-repeat="key in ctrl.displayOrder">\n                    <input type="checkbox" ng-checked="ctrl.display[key]" ng-click="ctrl.toggleSetting(key, ctrl.display[key])" /> [[ ::ctrl.labels[key] ]]\n                </label>\n            </div>\n        </div>'}}).directive("questionList",function(){return{controller:questionList_QuestionListController,controllerAs:"list",template:'\n            <search-field></search-field>\n            <br>\n            <li class="list-group-item text-center text-muted"\n                ng-if="list.totalQuestions != list.questionCount">\n                <small>Showing [[ list.questionCount ]] of [[ list.totalQuestions ]] questions.</small>\n            </li>\n            <div ng-if="list.splitQuestionsByProgram">\n                <program-separated-list></program-separated-list>\n            </div>\n            <div ng-if="!list.splitQuestionsByProgram">\n                <all-questions-list></all-questions-list>\n            </div>\n        '}}).directive("allQuestionsList",function(){return{template:'\n            <div class="list-group scrollable" scroller>\n                <question-list-items questions="list.questions" list="list"></question-list-items>\n            </div>\n        '}}).directive("programSeparatedList",function(){return{template:'\n            <div class="list-group list-group-root scrollable" scroller>\n                <div class="list-group" ng-repeat="(key, questions) in list.questions">\n                    <strong class="list-group-item text-muted" ng-bind="::list.eepPrograms[key].name"></strong>\n                    <div class="list-group">\n                        <question-list-items questions="questions" list="list"></question-list-items>\n                    </div>\n                </div>\n            </div>\n        '}}).directive("questionListItems",function(){return{scope:{questions:"=",list:"="},template:'\n        <li class="list-group-item text-center text-muted"\n            ng-if="questions.length != filteredQuestions.length">\n            <small>Search showing [[ filteredQuestions.length ]] of [[ questions.length ]] questions.</small>\n        </li>\n        <a ui-sref-active=\'active\'\n           ui-sref=\'checklist.detail({id: question.id})\'\n           ng-class="list.questionColors[question.id]"\n           class="list-group-item"\n           id=\'question_[[::question.id]]\'\n           ng-repeat="question in questions | filter:{question: list.searchString} as filteredQuestions track by question.id">\n                <div class="row">\n                    <div class="col-sm-10">\n                        <i class=\'fa fa-fw fa-pencil\' ng-if=\'list.temporaryAnswer[question.id]\'></i>\n                        <i class=\'fa fa-fw fa-exclamation-triangle\' ng-if=\'list.errors[question.id]\'></i>\n                        <span ng-if="::list.debug">\n                            [ <span ng-bind="::question.type"></span> ]\n                            [ <span ng-bind="::question.priority"></span> ]\n                            [ <span ng-bind="::question.id"></span> ]\n                        </span>\n                        <span ng-if="::question.is_optional">(Optional)</span>\n                        <span ng-bind="::question.question"></span>\n                    </div>\n                    <div class="col-sm-2">\n                        <div ng-bind="list.answerDisplay[question.id].answer || \'-\'"></div>\n                        <answer-misc answer="list.answerDisplay[question.id]" show-comment-tooltip="true"></answer-misc>\n                    </div>\n                </div>\n        </a>\n        <li class=\'list-group-item text-center\' ng-if=\'filteredQuestions.length == 0\'>\n            <i class="fa fa-fw fa-spin fa-spinner" ng-if="list.isFetching"></i>\n            No Questions\n        </li>\n        '}}).directive("questionDetail",function(){return{controller:QuestionDetailController,controllerAs:"detail",template:'\n            <div class="row">\n                <div class="col-xs-12">\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <checklist-actions\n                                previous="detail.gotoPrevious()"\n                                save="detail.triggerSave()"\n                                next="detail.gotoNext()"\n                                is-save-disabled="detail.isSaveDisabled"\n                                is-saving="detail.isSaving"\n                            ></checklist-actions>\n                        </div>\n                        <div class="col-xs-6 text-right">\n                            <retract answer="detail.answer" retract-callback="detail.retract()"></retract>\n                        </div>\n                    </div>\n                    <br>\n                    \x3c!--Question--\x3e\n                    <div class="row" style="min-height: 3.5em;">\n                        <div class="col-md-12">\n                            <p><strong>[[ detail.question.question ]]</strong></p>\n                        </div>\n                    </div>\n                    \x3c!--Related Answer--\x3e\n                    <div class="row" ng-if="detail.showRelatedAnswers && detail.relatedAnswer.id">\n                        <div class="col-xs-10">\n                            <checklist-field\n                                question="detail.question"\n                                answer="detail.relatedAnswer"\n                                is-related-answer="true"\n                                is-disabled="true"\n                            ></checklist-field>\n                        </div>\n                        <div class="col-xs-2">\n                            <answered-by answer="detail.relatedAnswer"></answered-by>\n                            <pending-review answer="detail.relatedAnswer"></pending-review>\n                            <answer-misc answer="detail.relatedAnswer"></answer-misc>\n                        </div>\n                    </div>\n                    \x3c!--Answer--\x3e\n                    <div class="row">\n                        <div class="col-xs-10">\n                            <checklist-field\n                                question="detail.question"\n                                answer="detail.answer"\n                                callbacks="detail.callbacks"\n                                is-disabled="!!detail.answer.id || detail.question.readonly"\n                            ></checklist-field>\n                        </div>\n                        <div class="col-xs-2">\n                            <answered-by answer="detail.answer"></answered-by>\n                            <pending-review answer="detail.answer"></pending-review>\n                            <answer-misc answer="detail.answer" ng-if="detail.answer.id"></answer-misc>\n                            <choice-misc answer="detail.answer" ng-if="!detail.answer.id"></choice-misc>\n                        </div>\n                    </div>\n                    \x3c!--Errors--\x3e\n                    <div class="row" ng-if="detail.errors">\n                        <div class="col-xs-12">\n                            <ul class="list-group">\n                                <list class="list-group-item list-group-item-danger" ng-repeat="error in detail.errors">[[ error ]]</list>\n                            </ul>\n                        </div>\n                    </div>\n                    \x3c!--Comments--\x3e\n                    <div class="row">\n                        \x3c!--Related Comment--\x3e\n                        <div class="col-xs-12" ng-if="detail.showRelatedAnswers && detail.relatedAnswer.id && detail.relatedAnswer.comment">\n                            <comment-display\n                                label="Original Comment"\n                                comment="detail.relatedAnswer.comment"\n                                commenter="detail.relatedAnswer.full_name"\n                            ></comment-display>\n                        </div>\n                        \x3c!--Comment--\x3e\n                        <div class="col-xs-12">\n                            <comment-field\n                                comment-required="detail.selectedChoice.comment_required"\n                                change-callback="detail.updateComment(comment)"\n                                question="detail.question"\n                                answer="detail.answer"\n                            ></comment-field>\n                        </div>\n                    </div>\n                    \x3c!--Documents--\x3e\n                    <div class="row">\n                        <div class="col-xs-12">\n                            <file-table\n                                label="Documents[[ detail.selectedChoice.document_required ? \'*\' : \'\' ]] and Photos[[ detail.selectedChoice.photo_required ? \'*\' : \'\' ]]"\n                                accepted-types=".txt .pdf .doc .docx .xls .xlsx .png .jpeg .jpg"\n                                documents="detail.data.customer_documents"\n                                documents-uploader="detail.answer.full_name"\n                                related-documents="detail.relatedAnswer.customer_documents"\n                                related-documents-uploader="detail.relatedAnswer.full_name"\n                                show-related-documents="detail.showRelatedAnswers"\n                                can-add="!detail.answer.id"\n                                add-callback="detail.documentCallback(name, file, raw, extension)"\n                                remove-callback="detail.removeDocument(doc)"\n                            ></file-table>\n\n                        </div>\n                    </div>\n                    \x3c!--Description--\x3e\n                    <div ng-if="detail.question.description">\n                        <button class="btn btn-link" ng-click="showDescription=!showDescription">[[ !showDescription ? \'Show\' : \'Hide\' ]] Description</button>\n                        <p collapse="!showDescription" ng-bind-html="detail.trustAsHtml(detail.question.description)"></p>\n                    </div>\n                </div>\n                <span ng-if="::detail.debug">[[ detail.question|json ]]</span>\n            </div>\n        '}}).directive("questionFilterSettings",function(){return{scope:{},controller:FilterSettingsController,controllerAs:"ctrl",template:'\n            <h3 style="margin-top: 0;">Filter Options</h3>\n            <div class="row">\n                <div class="col-sm-12">\n                    <a ng-click="ctrl.resetFilters($event)">\n                        <i class="fa fa-fw fa-refresh"></i>\n                        Reset Filters\n                    </a>\n                    <question-filter-setting-checkbox label="Question Display" prefix="Hide" lookup="states"></question-filter-setting-checkbox>\n                    <question-filter-setting label="EEP Programs" lookup="programs"></question-filter-setting>\n                    <question-filter-setting label="Checklist Sections" lookup="sections"></question-filter-setting>\n                </div>\n            </div>\n        '}}).directive("questionFilterSetting",function(){return{scope:{label:"@",lookup:"@"},controller:filterSettings_SingleFilterController,controllerAs:"ctrl",bindToController:!0,template:'\n            <div class="form-group" ng-if="ctrl[ctrl.lookup].length > 1">\n                <label>\n                    [[ ctrl.label ]]\n                </label>\n                <multi-select\n                    name="question_[[ ctrl.lookup ]]"\n                    on-item-click="ctrl.toggleBox(data)"\n                    helper-elements=""\n                    button-label="name"\n                    item-label="name"\n                    input-model="ctrl[ctrl.lookup]"\n                    output-model="ctrl.outputs"\n                    tick-property="selected" >\n                </multi-select>\n            </div>\n        '}}).directive("questionFilterSettingCheckbox",function(){return{scope:{label:"@",lookup:"@",prefix:"@"},controller:filterSettings_SingleFilterController,controllerAs:"ctrl",bindToController:!0,template:'\n            <div class="panel filter-panel panel-default form-group" ng-if="ctrl[ctrl.lookup].length > 1">\n                <div class="panel-heading">[[ ctrl.label ]]</div>\n                <ul class="list-group">\n                    <li class="list-group-item" ng-repeat="box in ctrl[ctrl.lookup]">\n                        <label>\n                            <input type="checkbox" ng-checked="!box.selected" ng-click="ctrl.toggleBox({key: box.key, selected: !box.selected})"> [[ ctrl.prefix || \'\' ]] [[ box.name ]] &emsp;\n                        </label>\n                    </li>\n                </ul>\n            </div>\n        '}}).directive("openInput",function(){return{scope:{question:"=",answer:"=",isDisabled:"=",isRelatedAnswer:"=",answerCallback:"&"},template:'\n        <div class=\'form-group\'>\n            <form class=\'controls\' ng-submit=\'input.answerCallback({answer: input.answer, triggerSave: true})\'>\n                <div class="input-group" ng-if="input.question.unit">\n                    <input type=\'text\'\n                        class=\'textinput textInput form-control\'\n                        ng-model=\'input.answer\'\n                        ng-change=\'input.answerCallback({answer: input.answer})\'\n                        ng-attr-placeholder=\'[[ input.placeholder ]]\'\n                        ng-readonly=\'input.isDisabled\'\n                        />\n                    <span class="input-group-addon">[[ input.question.unit  ]]</span>\n                </div>\n                <input type="text"\n                    class="textinput textInput form-control"\n                    ng-model="input.answer"\n                    ng-change="input.answerCallback({answer: input.answer})"\n                    ng-attr-placeholder="[[ input.placeholder ]]"\n                    ng-readonly="input.isDisabled"\n                    ng-if="!input.question.unit">\n            </form>\n        </div>\n        ',replace:!0,controller:openInputField_OpenFieldInputController,controllerAs:"input",bindToController:!0}}).directive("fileInput",function(){return{scope:{callback:"&"},link:function(scope,elem,attrs){var input=elem.find('input[type="file"]'),jasny=elem.find(".fileinput");input.bind("change",function(event){var clearFn=_.after(event.target.files.length,function(){return jasny.fileinput("clear")});return _.map(event.target.files,function(file){var name=file.name,extension=name.split(".").pop();scope.callback({name:name,file:file,extension:extension}),clearFn()})})},template:'<div class="row">\n    <div class="col-xs-12">\n        <div class="form-group">\n            <div class="controls">\n                <div class="fileinput fileinput-new input-group" data-provides="fileinput">\n                    <div class="form-control" data-trigger="fileinput">\n                        <i class="icon-file fileinput-exists"></i>\n                        <span class="fileinput-filename"></span>\n                    </div>\n                        <span class="input-group-addon btn btn-default btn-file">\n                            <span class="fileinput-new">Select file</span>\n                            <span class="fileinput-exists">Change</span>\n                            <input name="fileupload" type="file" multiple/>\n                        </span>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n        '}}).directive("searchField",function(){return{scope:{},template:"<input type='text' class='form-control' placeholder='Search...' ng-model='ctrl.searchString'/>",controllerAs:"ctrl",controller:function($ngRedux,$scope,FilterActions){var _this=this;$scope.$on("$destroy",$scope.$watch(function(){return _this.searchString},function(newVal,oldVal){return $ngRedux.dispatch(FilterActions.setSearchString(newVal))})),$scope.$on("$destroy",$ngRedux.connect(function(state){return{searchString:state.filters.searchString}}.bind(this))(this))}}}).directive("commentField",function(){return{scope:{commentRequired:"=",changeCallback:"&",question:"=",answer:"="},controller:CommentFieldInputController,controllerAs:"input",bindToController:!0,template:"\n        <div class='form-group'>\n            <div class='controls' ng-if='!input.answer.id'>\n                <label class='control-label'>Comment[[ input.commentRequired ? '*' : '' ]]</label>\n                <textarea\n                    ng-attr-placeholder='[[ input.commentRequired ? \"Comment Required...\" : \"Comment...\" ]]'\n                    ng-model='input.comment'\n                    ng-change='input.changeCallback({comment: input.comment})'\n                    class='textarea form-control' />\n            </div>\n            <comment-display\n                ng-if=\"input.answer.id && input.answer.comment\"\n                comment=\"input.answer.comment\"\n                commenter=\"input.answer.full_name\"\n            ></comment-display>\n        </div>\n        "}}).directive("checklistField",function(){return{scope:{question:"=",answer:"=",isDisabled:"=",isRelatedAnswer:"=",callbacks:"="},template:"\n        <div ng-switch='question.type'>\n            <div ng-switch-when='multiple-choice'>\n                <multiple-choice\n                    choices='question.choices'\n                    question='question'\n                    answer='answer'\n                    is-disabled='isDisabled'\n                    is-related-answer=\"isRelatedAnswer\"\n                    answer-callback='callbacks.multipleChoiceAnswerCallback(choice, triggerSave)'\n                ></multiple-choice>\n            </div>\n            <div ng-switch-default>\n                <open-input\n                    question='question'\n                    answer='answer.answer'\n                    is-disabled='isDisabled'\n                    is-related-answer='isRelatedAnswer'\n                    answer-callback='callbacks.openAnswerCallback(answer, triggerSave)'\n                ></open-input>\n            </div>\n        </div>\n        "}}).directive("multipleChoice",function(){return{scope:{choices:"=",question:"=",answer:"=",isDisabled:"=",answerCallback:"&"},template:"\n        <div class='control btn-group form-group' data-toggle='buttons'>\n            <multiple-choice-input\n                name='ctrl.question.id'\n                label='choice.choice'\n                is-disabled='ctrl.isDisabled'\n                is-selected='ctrl.isChoiceSelected(choice)'\n                selected-class='ctrl.getDisplayClass(choice)'\n                ng-click=\"ctrl.clickHandler(choice)\"\n                ng-repeat='choice in ctrl.choices'\n            ></multiple-choice-input>\n        </div>\n        ",controller:MultipleChoiceController,controllerAs:"ctrl",bindToController:!0}}).directive("multipleChoiceInput",function(){return{scope:{name:"=",label:"=",isDisabled:"=",isSelected:"=",selectedClass:"="},template:"\n        <label class='btn btn-default' ng-class='input.getClasses()'>\n            <input type='radio'\n                name='[[ input.name ]]'\n                ng-value='input.label'\n                ng-disabled='input.isDisabled' /> [[ input.label ]]\n        </label>\n        ",replace:!0,controller:multipleChoiceField_MultipleChoiceInputController,controllerAs:"input",bindToController:!0}}).directive("answeredBy",function(){return{scope:{answer:"="},template:"\n        <small ng-if='answer'>\n            By: [[ answer.full_name ]] <br>\n            On: [[ answer.created_date ]]\n        </small>\n        "}}).directive("answerMisc",function(){return{scope:{answer:"=",showCommentTooltip:"="},template:"\n        <div>\n            <i class='fa fa-fw fa-comment-o' ng-if='answer.comment && showCommentTooltip' tooltip=\"[[ answer.comment ]]\"></i>\n            <i class='fa fa-fw fa-comment-o' ng-if='answer.comment && !showCommentTooltip'></i>\n            <i class='fa fa-fw fa-picture-o' ng-if='answer.answerimage_set.length'></i>\n            <i class='fa fa-fw fa-file-text' ng-if='answer.answerdocument_set.length || answer.customer_documents.length'></i>\n        </div>\n        "}}).directive("choiceMisc",function(){return{scope:{choice:"="},template:"\n        <div>\n            <i class='fa fa-fw fa-comment-o' ng-if='choice.comment_required'></i>\n            <i class='fa fa-fw fa-picture-o' ng-if='choice.photo_required'></i>\n            <i class='fa fa-fw fa-file-text' ng-if='choice.document_required'></i>\n        </div>\n        "}}).directive("fileDisplay",function(){return{scope:{doc:"=",removeCallback:"&",uploadedBy:"="},template:'\n        <tr>\n            <td ng-if="doc.id">\n                <a ng-href="[[ doc.document ]]">\n                <i class="fa fa-cloud-download"></i>\n                [[ doc.filename ]]\n                </a>\n                <small class="text-muted" ng-if="doc.filesize">\n                    ([[ doc.filesize | bytes ]])\n                </small>\n                <small class="text-muted" ng-bind="uploadedBy"></small>\n            </td>\n            <td ng-if="!doc.id">\n                <i class="fa fa-fw fa-spin fa-spinner fa-lg" ng-if="doc.isLoading"></i>\n                [[ doc.name || doc.filename ]]\n                <small class="text-muted" ng-if="doc.file.size">([[ doc.file.size | bytes ]])</small>\n            </td>\n            <td>\n                <a ng-if="!doc.id" ng-click="removeCallback({doc: doc})"><i class="fa fa-fw fa-times"></i></a>\n            </td>\n        </tr>\n        ',replace:!0}}).directive("pendingReview",function(){return{scope:{answer:"="},template:"<em ng-if='reviewIsPending'>Pending Review</em>",link:function(scope){scope.reviewIsPending=function(){var answer=scope.answer;if(answer){var confirmed=answer.confirmed,is_considered_failure=answer.is_considered_failure,failure_is_reviewed=answer.failure_is_reviewed;return!confirmed&&is_considered_failure&&!failure_is_reviewed}return!1}()}}}).directive("commentDisplay",function(){return{scope:{label:"@",comment:"=",commenter:"="},template:'\n        <div>\n            <label class="control-label">[[ label || \'Comment\' ]]</label>\n            <blockquote>\n                <p>[[ comment ]]</p>\n                <footer ng-if="commenter">[[ commenter ]]</footer>\n            </blockquote>\n        </div>\n        '}}).directive("checklistProgressBar",function(){return{controller:function($scope,$ngRedux){var _this=this;$scope.$on("$destroy",$ngRedux.connect(questionsStatistics)(this)),$scope.$on("$destroy",$ngRedux.connect(function(state){return{processing:state.settings.savingAnswer}})(this)),this.getKlasses=function(){return _this.processing?"progress-bar-striped active":""},this.calculateSuccess=function(){return _this.answeredRequiredQuestions/_this.totalQuestions*100},this.calculateInfo=function(){return _this.answeredOptionalQuestions/_this.totalQuestions*100}},controllerAs:"ctrl",template:'\n        <div ng-if="ctrl.totalQuestions">\n            <h5>\n                <div> [[ ctrl.remainingRequiredQuestions ]] of [[ ctrl.totalRequiredQuestions ]] Required Questions Remaining. </div>\n                <div ng-if="ctrl.totalOptionalQuestions"> [[ ctrl.remainingOptionalQuestions ]] of [[ ctrl.totalOptionalQuestions ]] Optional Questions Remaining. </div>\n            </h5>\n            <progress>\n                <bar class="[[ ctrl.getKlasses() ]]" value="ctrl.calculateSuccess()" type="success"></bar>\n                <bar class="[[ ctrl.getKlasses() ]]" value="ctrl.calculateInfo()" type="info"></bar>\n            </progress>\n        </div>\n        '}}).directive("retract",function(){return{scope:{answer:"=",retractCallback:"&"},template:"<a class='btn btn-default btn-xs' ng-if='answerIsRetractable()' ng-click='retractCallback()'>Retract</a>",link:function(scope){scope.answerIsRetractable=function(){var answer=scope.answer;if(answer){var confirmed=answer.confirmed,is_considered_failure=answer.is_considered_failure;return!confirmed&&!is_considered_failure&&!READONLY}return!1}}}}).directive("checklistActions",function(){return{scope:{previous:"&",save:"&",isSaveDisabled:"=",isSaving:"=",next:"&"},controller:checklistActions_ChecklistActionsController,controllerAs:"actions",bindToController:!0,template:"\n        <div class='btn-group'>\n            <a class='btn btn-default' ng-disabled=\"actions.previousDisabled\" ng-click='actions.previous()'><i class='fa fa-angle-double-left'></i> Prev</a>\n            <a class='btn btn-primary' ng-click='actions.save()' ng-disabled='actions.saveDisabled()'>\n                <i class=\"fa fa-fw fa-spinner fa-spin\" ng-show=\"actions.isSaving\"></i>\n                Save\n            </a>\n            <a class='btn btn-default' ng-disabled=\"actions.nextDisabled\" ng-click='actions.next()'>Next <i class='fa fa-angle-double-right'></i></a>\n        </div>\n        "}}).directive("homeDetailDropdown",function(){return{scope:{},controller:function($ngRedux){var homeId=$ngRedux.getState().settings.homeId;this.homeDetailUrl="/home/".concat(homeId,"/")},controllerAs:"ctrl",template:'\n        <div class="btn-group">\n            <a role="button" ui-sref="checklist()" class="btn btn-default btn-xs">Home Detail</a>\n            <a ng-href="[[ ctrl.homeDetailUrl ]]" target="_blank" class="btn btn-default btn-xs"\n                tooltip="View full detail" tooltip-placement="bottom"\n            >\n                <i class="fa fa-external-link"></i>\n            </a>\n        </div>\n        '}}).directive("settingsButton",function(){return{scope:{},controller:function($ngRedux,FilterActions){this.resetFilters=function(e){e.preventDefault(),$ngRedux.dispatch(FilterActions.resetFilters())}},controllerAs:"ctrl",template:'\n            <a ui-sref="checklist.settings()" class="btn btn-default btn-xs">\n                <i class="fa fa-fw fa-cog"></i>\n                Settings\n            </a>\n        '}}).directive("scroller",function(){return{controller:function($scope,$ngRedux,$stateParams,$element){var unwatch=$scope.$watch(function(){return $stateParams.id},function(newVal,oldVal){if(0|newVal&&oldVal!=newVal){var activeEl=$element.find(".active");if(!activeEl.length)return;var currScroll=$element.scrollTop(),parentTop=$element.offset().top,selectedTop=activeEl.offset().top,parentBottom=parentTop+$element.outerHeight(),selectedBottom=selectedTop+activeEl.outerHeight();parentBottom<selectedBottom?$element.scrollTop(currScroll+(selectedBottom-parentBottom)):selectedTop<parentTop&&$element.scrollTop(currScroll-(parentTop-selectedTop))}});$scope.$on("$destroy",unwatch)}}}).filter("words",function(){return function(input,words){if(isNaN(words))return input;if(words<=0)return"";if(input){var inputWords=input.split(/\s+/);inputWords.length>words&&(input=inputWords.slice(0,words).join(" ")+"...")}return input}}).filter("bytes",function(){var units=["bytes","kB","MB","GB","TB","PB"];return function(bytes){var precision=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(0===bytes)return"0 bytes";if(isNaN(0|bytes||!isFinite(bytes)))return"-";var number=Math.floor(Math.log(bytes)/Math.log(1024)),val=(bytes/Math.pow(1024,Math.floor(number))).toFixed(precision);return"".concat(val.match(/\.0*$/)?val.substr(0,val.indexOf(".")):val," ").concat(units[number])}})},6:function(module,exports){module.exports=angular}});
