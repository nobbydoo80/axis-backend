{% extends "base.html" %}

{% block page_title %}Pivotal Energy Solutions{% endblock %}

{% block javascript_head %}
    {{ block.super }}
    <script type="text/javascript" src="{{ STATIC_URL }}core/dashboard/dashboard.js"></script>
    <script type="application/javascript">
        $(function () {
            var originalBGHeight = $('.bg').outerHeight();

            function parallax() {
                var scrolled = $(window).scrollTop();
                $('.bg').css('height', (originalBGHeight - scrolled) + 'px');
            }

            $(window).scroll(function (e) {
                parallax();
            });

            $("ul[class^='nav'] li a[href^='/about']").attr("href", "#about");
            $("ul[class^='nav'] li a[href^='/products']").attr("href", "#products");
            $("ul[class^='nav'] li a[href^='/news']").attr("href", "#news");

            $("ul[class^='nav'] li a[href^='#']").on('click', function (e) {
                var hash=this.hash;
                e.preventDefault();
                $('html, body').animate({
                    scrollTop: $(hash).offset().top - 75
                }, 300, function () {
                    console.log("Hash: " + hash)
                    window.location.hash = hash;
                });

            });
        });
    </script>
    <script>
      window.fbAsyncInit = function() { FB.init({ appId: '975402995832630', xfbml: true, version: 'v2.4'}); };
      (function(d, s, id){
         var js, fjs = d.getElementsByTagName(s)[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement(s); js.id = id;
         js.src = "//connect.facebook.net/en_US/sdk.js";
         fjs.parentNode.insertBefore(js, fjs);
       }(document, 'script', 'facebook-jssdk'));
    </script>
{% endblock javascript_head %}

{% block style_sheet %}
        <link rel="stylesheet" href="{{ STATIC_URL }}css/public_bootstrap{% if not debug %}.min{% endif %}.css" rel='stylesheet' media='screen'>
        <style type="text/css">
            .search-section {
                margin-top: 70px;
                color: white;
                text-shadow: #444 0 1px 1px;
            }
            .lookupbutton {
                border-radius: 15px;
                background: #53a22e;
                color: #fff;
                height: 40px;
                width: 120px;
                border: 1px solid white;
            }

            .lookupinputbox {
                width: 90%;
                height: 45px;
                border-radius: 7px;
                padding: 10px;
                border: 1px solid grey;
                margin-bottom: 20px;
                color: grey;
                font-size: 1.8rem;
            }
        </style>
{% endblock %}

{% block jumbotron %}
    {% if 'neea' not in site.domain %}
        <div id="fb-root"></div>
        <div class="container">
            <div class="col-md-8">
                {% if home_innovation_enabled %}
                <div class="jumbotron">
                        <div class="bg"></div>
                        <svg id="Logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 323.37 72.5" height="160px"><defs><style>.cls-1,.cls-2{fill:#FFFFFF;}.cls-2{stroke:#FFFFFF;stroke-width:0.25px;}</style></defs><polyline class="cls-1" points="38.65 0 0 23.02 0.28 72.34 74.39 72.34 74.39 27.79 69.73 66.96 5.54 66.96 5.24 26.12 38.65 0"/><rect class="cls-1" x="25.2" y="26.97" width="11.79" height="12.47"/><rect class="cls-1" x="39.29" y="26.97" width="11.79" height="12.47"/><rect class="cls-1" x="25.2" y="41.78" width="11.79" height="12.47"/><rect class="cls-1" x="39.29" y="41.78" width="11.79" height="12.47"/><path class="cls-1" d="M85.36,38.08" transform="translate(-0.27 -3.51)"/><path class="cls-1" d="M98.42,54.94V46.11H90.81v8.83H86V32.86h4.8V42h7.61V32.86h4.8V54.94Z" transform="translate(-0.27 -3.51)"/><path class="cls-1" d="M113.19,55.33a7.4,7.4,0,1,1,7.48-7.44A7.51,7.51,0,0,1,113.19,55.33Zm0-10.79c-1.71,0-2.61,1.78-2.61,3.38s.9,3.41,2.64,3.41,2.61-1.82,2.61-3.44S115,44.54,113.16,44.54Z" transform="translate(-0.27 -3.51)"/><path class="cls-1" d="M140.63,54.94V47.72c0-1.88-.29-3-1.81-3s-2.13,1.17-2.13,2.8v7.38h-5V47.72c0-1.88-.29-3-1.81-3s-2.13,1.17-2.13,2.8v7.38h-5v-14h5v1.46a4.22,4.22,0,0,1,3.84-1.85,4.46,4.46,0,0,1,4.25,2.3,5.53,5.53,0,0,1,4.68-2.3c3.74,0,5.09,2.63,5.09,6v8.42Z" transform="translate(-0.27 -3.51)"/><path class="cls-1" d="M155.42,55.33c-4.06,0-7.8-2.18-7.8-7.51,0-4.68,3.09-7.28,7-7.28,4.42,0,7.42,3.15,7.42,8.26h-9.74a3,3,0,0,0,3.13,3,6.48,6.48,0,0,0,4.64-1.49L162.19,53A9.9,9.9,0,0,1,155.42,55.33Zm-.87-11.54c-1.42,0-2,1-2.22,2.34h4.57A2.32,2.32,0,0,0,154.55,43.79Z" transform="translate(-0.27 -3.51)"/><path class="cls-1" d="M169.18,54.94V32.86H174V54.94Z" transform="translate(-0.27 -3.51)"/><path class="cls-1" d="M186.79,54.94V47.72c0-1.88-.45-3-2-3s-2.29,1.08-2.29,2.8v7.38h-5v-14h5v1.46a4.76,4.76,0,0,1,4-1.85c3.74,0,5.25,2.63,5.25,6v8.42Z" transform="translate(-0.27 -3.51)"/><path class="cls-1" d="M203.85,54.94V47.72c0-1.88-.45-3-2-3s-2.29,1.08-2.29,2.8v7.38h-5v-14h5v1.46a4.76,4.76,0,0,1,4-1.85c3.74,0,5.25,2.63,5.25,6v8.42Z" transform="translate(-0.27 -3.51)"/><path class="cls-1" d="M218.35,55.33a7.4,7.4,0,1,1,7.48-7.44A7.51,7.51,0,0,1,218.35,55.33Zm0-10.79c-1.71,0-2.61,1.78-2.61,3.38s.9,3.41,2.64,3.41S221,49.51,221,47.89,220.12,44.54,218.32,44.54Z" transform="translate(-0.27 -3.51)"/><path class="cls-1" d="M235.66,54.94h-3.42l-6.25-14h5.32l2.22,5.75A10.63,10.63,0,0,1,234,48.5a15.24,15.24,0,0,1,.45-1.82l2.23-5.75h5.16Z" transform="translate(-0.27 -3.51)"/><path class="cls-1" d="M251.91,54.94V53.87a6.74,6.74,0,0,1-4.8,1.46c-2.68,0-5-1.69-5-4.36,0-4.35,5.32-5.2,9.83-5.39v-.49c0-1-.64-1.3-2.06-1.3a10.46,10.46,0,0,0-5,1.2l-1.55-3A13.6,13.6,0,0,1,250,40.54c4.61,0,6.9,1.49,6.9,5.49v8.91Zm0-6.54c-2.13,0-4.51.49-4.51,2.05a1.46,1.46,0,0,0,1.61,1.3,4,4,0,0,0,2.9-1Z" transform="translate(-0.27 -3.51)"/><path class="cls-1" d="M265,54.94c-2.81,0-4.64-2.18-4.64-5.14V44.66h-1.75V40.93h1.75V35.11h5v5.82h2.36v3.73h-2.36v4.23c0,1.08.55,1.82,1.55,1.82h1.23v4.23Z" transform="translate(-0.27 -3.51)"/><path class="cls-1" d="M270.48,38.65V34h5v4.62Zm0,16.29v-14h5v14Z" transform="translate(-0.27 -3.51)"/><path class="cls-1" d="M285.08,55.33a7.4,7.4,0,1,1,7.48-7.44A7.51,7.51,0,0,1,285.08,55.33Zm0-10.79c-1.71,0-2.61,1.78-2.61,3.38s.9,3.41,2.64,3.41,2.61-1.82,2.61-3.44S286.85,44.54,285.05,44.54Z" transform="translate(-0.27 -3.51)"/><path class="cls-1" d="M303.91,54.94V47.72c0-1.88-.46-3-2-3s-2.29,1.08-2.29,2.8v7.38h-5v-14h5v1.46a4.76,4.76,0,0,1,4-1.85c3.74,0,5.25,2.63,5.25,6v8.42Z" transform="translate(-0.27 -3.51)"/><path class="cls-2" d="M92.62,75.69,87.9,70.24v5.45H86.3V64h3.77a3.43,3.43,0,0,1,3.62,3.44,3.39,3.39,0,0,1-3.33,3.35l4.31,4.89ZM89.79,65.51H87.9v4h1.85a2,2,0,1,0,0-4Z" transform="translate(-0.27 -3.51)"/><path class="cls-2" d="M104.94,75.69V64h6.53v1.5h-4.93v3.73h4.82v1.51h-4.82v3.44h5.23v1.5Z" transform="translate(-0.27 -3.51)"/><path class="cls-2" d="M125.52,75.89a5.2,5.2,0,0,1-3.42-1.19l.91-1.23a3.88,3.88,0,0,0,2.43.86c1.19,0,2-.52,2-1.63s-.91-1.54-2-2.06c-1.66-.85-3.36-1.59-3.36-3.81,0-1.73,1.28-3,3.38-3a5.41,5.41,0,0,1,3.15,1l-.86,1.31a3.46,3.46,0,0,0-2.31-.73c-.91,0-1.68.46-1.68,1.34,0,1.26,1.12,1.7,2.56,2.42s2.74,1.5,2.74,3.45A3.29,3.29,0,0,1,125.52,75.89Z" transform="translate(-0.27 -3.51)"/><path class="cls-2" d="M139.73,75.69V64h6.53v1.5h-4.93v3.73h4.82v1.51h-4.82v3.44h5.24v1.5Z" transform="translate(-0.27 -3.51)"/><path class="cls-2" d="M165,75.69l-1.41-3.77h-3.73l-1.41,3.77h-1.7L161.22,64h1l4.51,11.68Zm-3.19-8.54a2.57,2.57,0,0,1-.09-.32l-.08.3-1.22,3.28H163Z" transform="translate(-0.27 -3.51)"/><path class="cls-2" d="M183.44,75.69l-4.72-5.45v5.45h-1.6V64h3.78a3.43,3.43,0,0,1,3.62,3.44,3.39,3.39,0,0,1-3.33,3.35l4.3,4.89Zm-2.83-10.18h-1.89v4h1.86a2,2,0,1,0,0-4Z" transform="translate(-0.27 -3.51)"/><path class="cls-2" d="M200.65,75.89a5.85,5.85,0,0,1-5.73-6,5.79,5.79,0,0,1,5.8-6A5.23,5.23,0,0,1,205,65.64l-1.18,1.06a4.22,4.22,0,0,0-7.27,3.12,4.27,4.27,0,0,0,4.1,4.5,4.48,4.48,0,0,0,3.42-1.62l1.15,1A5.62,5.62,0,0,1,200.65,75.89Z" transform="translate(-0.27 -3.51)"/><path class="cls-2" d="M222.94,75.69v-5h-5.6v5h-1.6V64h1.6v5.15h5.6V64h1.6V75.69Z" transform="translate(-0.27 -3.51)"/><path class="cls-2" d="M247.1,75.69V64h1.6V74.19h4.44v1.5Z" transform="translate(-0.27 -3.51)"/><path class="cls-2" d="M271.36,75.69,270,71.92h-3.73l-1.41,3.77h-1.7L267.59,64h1l4.51,11.68Zm-3.19-8.54a2.57,2.57,0,0,1-.09-.32l-.08.3-1.22,3.28h2.61Z" transform="translate(-0.27 -3.51)"/><path class="cls-2" d="M287,75.69h-3.5V64h3.09a3.08,3.08,0,0,1,3.39,3,3,3,0,0,1-1.34,2.69,3,3,0,0,1,2,2.78C290.61,74,289.58,75.69,287,75.69Zm-.68-10.18H285.1v3.7h1.07c1.75,0,2.15-1.06,2.15-2S287.63,65.51,286.32,65.51Zm.67,5.21H285.1v3.47h1.73c1.44,0,2.11-.71,2.11-1.79A1.72,1.72,0,0,0,287,70.72Z" transform="translate(-0.27 -3.51)"/><path class="cls-2" d="M304.13,75.89a5.2,5.2,0,0,1-3.42-1.19l.91-1.23a3.9,3.9,0,0,0,2.43.86c1.19,0,2-.52,2-1.63s-.92-1.54-2-2.06c-1.66-.85-3.36-1.59-3.36-3.81,0-1.73,1.28-3,3.38-3a5.41,5.41,0,0,1,3.15,1l-.86,1.31a3.46,3.46,0,0,0-2.31-.73c-.91,0-1.68.46-1.68,1.34,0,1.26,1.12,1.7,2.56,2.42s2.74,1.5,2.74,3.45A3.29,3.29,0,0,1,304.13,75.89Z" transform="translate(-0.27 -3.51)"/><path class="cls-1" d="M316.5,70.9v4.61h-.77V70.9h-1.06v-.71h2.94v.71Zm6.37,4.61V71.45l-1.73,2.35h-.29l-1.75-2.27v4h-.77V70.19H319l2,2.6,1.94-2.6h.71v5.32Z" transform="translate(-0.27 -3.51)"/></svg>
                    </div>
                {% else %}
                    <div class="bg"></div>
                    <div class="jumbotron">
                        <h1>{{ site.name }}</h1>
                        <p class="lead">+ A Home Energy Efficiency Data Company</p>
                        <div class="fb-like" data-href="https://www.facebook.com/PivotalEnergySolutions"
                            data-layout="button_count" data-action="like" data-show-faces="false"
                            data-share="true"></div>
                    </div>
                {% endif %}
            </div>
            <div class="col-md-4">
                <div class="search-section">
                    <h4>Enter an address, city, state, subdivision, or multi-family development name</h4>
                    <div class="search-bar col-md-12">
                        <div class="row">
                            <input type="text" id="search-input" placeholder="Enter your search query" class="lookupinputbox">
                        </div>
                        <div class="row">
                            <button id="search-button" class="lookupbutton">Search</button>
                        </div>
                    </div>
                </div>

                <script>
                    document.getElementById("search-button").addEventListener("click", function() {
                        var searchQuery = document.getElementById("search-input").value;
                        var currentUrl = window.location.href;
                        var baseUrl = new URL(currentUrl).origin;
                        var searchUrl = baseUrl + "/app/certification/lookup/?search=" + encodeURIComponent(searchQuery);
                        window.location.href = searchUrl;
                    });
                </script>
            </div>
        </div>
    {% endif %}
{% endblock jumbotron %}

{% block full_content %}
    <div class="row" id="about">
        <div class="col-md-12">
            <h2>About {% if home_innovation_enabled %}Pivotal Energy Solutions{% else %}us{% endif %}</h2>
        </div>
        <div class="col-md-8">
            {{ info.content|safe }}
            <p class="pull-left"><a href="{% url 'about' %}" class="btn btn-default">Read more &raquo;</a></p>
        </div>
        <div class="col-md-4">
            <div class="well">
                <h3>AXIS Demonstrations</h3>

                <p>We offer on-line webinars to demonstrate AXIS features and functionality.
                    <a href="{% url 'contact' %}">Contact us</a>
                    by phone or email to schedule a webinar for your organization.
                </p>
                <br/>

                <p><a href="{% url 'contact' %}" class="btn btn-primary btn-large">Learn more &raquo;</a></p>
            </div>
        </div>
    </div>
    <hr>
    <div class="row" id="products">
        <div class="col-md-12">
            <h2>Products</h2>
        </div>
        {{ products.content|safe }}
        <hr>
    </div>

    <div class="row" id="news">
        <div class="col-md-12">
            <h2>Latest News</h2>
        </div>
    </div>

    {% for item in news %}
        <div class="row">
            <div class="col-md-12">
                <h4><a href="{{ item.url }}">{{ item.title }}</a></h4>
                <p><strong>{{ item.date }}</strong></p>
                {{ item.content|safe }}
            </div>
        </div>
        {% if not forloop.last %}
            <hr/>
        {% endif %}
    {% endfor %}
    <br />
    <div class="row">
        <div class="col-md-12">
            <p class="pull-right"><a href="{% url 'news' %}" class="btn btn-default">More News &raquo;</a></p>
        </div>
    </div>


{% endblock %}
