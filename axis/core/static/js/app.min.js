import e from"angular";import n from"../../webpack/auth/index.js";import{urls as t}from"../../webpack/imports/settings.js";import i from"../../webpack/zendesk/index.js";e.module("axis",["axis.messaging","axis.navigation",n,i].concat(window.axis_angular_dependencies)).config(function(e,n,t){e.resourceUrlWhitelist(["self",window.STATIC_URL+"**"]),n.startSymbol("[["),n.endSymbol("]]"),t.defaults.xsrfCookieName="csrftoken",t.defaults.xsrfHeaderName="X-CSRFToken"}).factory("User",function(n,i,r){var a=n(t.user.detail),o={user:{},change_callbacks:[]};return null!==window.user_id&&s(),{getUser:s,setUser:c,user:o.user,subscribe:e=>o.change_callbacks.push(e)};function c(n){console.log("setting user",n.username),e.extend(o.user,n),_.map(o.change_callbacks,e=>e(o.user))}function s(){var e=a({id:window.user_id});return i.get(e).then(e=>(c(e.data),e.data))}}).directive("copyToClipboard",function(){return{restrict:"A",scope:{copyToClipboard:"="},link:function(e,n,t){n.click(function(){if(t.copyToClipboard){var e=$("<input>");$("body").append(e),e.val(t.copyToClipboard).select(),document.execCommand("copy"),e.remove()}})}}}).directive("axisAutoLink",function(n){return{restrict:"A",link:function(t,i,r){let a=r.href;if(i.on("click",function(e){e.which>1||e.shiftKey||e.altKey||e.metaKey||e.ctrlKey||"_blank"===e.target.target||setTimeout(function(){window.location=a},100)}),!e.isUndefined(n.examineApp)&&r.href.toLowerCase().indexOf("add")>-1){var o;o=t.$watch(function(){return n.examineApp.creating},function(e,n){!1===e&&o(),!0===n&&!1===e&&i.parent().removeClass("active")})}}}});