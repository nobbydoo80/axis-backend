(function($){$.dndPageScroll=function(options){options||(options={});var defaults={topId:"top_scroll_page",bottomId:"bottom_scroll_page",delay:50};var options=$.extend(defaults,options);var top_el=$("#"+options.topId);if(!top_el.length)top_el=$('<div id="top_scroll_page">&nbsp;</div>').appendTo("body");var bottom_el=$("#"+options.bottomId);if(!bottom_el.length)bottom_el=$('<div id="bottom_scroll_page">&nbsp;</div>').appendTo("body");var both_el=$("#top_scroll_page, #bottom_scroll_page");both_el.hide();both_el.css({position:"fixed",left:0,right:0,height:20,zIndex:999999});top_el.css({top:0});bottom_el.css({bottom:0});var lastTop;var lastBottom;both_el.on("dragenter",function(e){var direction=$(this).attr("id")==options.topId?"up":"down";return true});both_el.on("dragover",function(e){if($("html,body").is(":animated"))return true;var scrollTop=$(window).scrollTop();var direction=$(this).attr("id")==options.topId?-1:1;var last=direction==-1?lastTop:lastBottom;var current=direction==-1?scrollTop:$(document).height()-(scrollTop+$(window).height());if(last!=undefined&&last==current&&current>0){var newScrollTop=scrollTop+direction*50;$("html,body").animate({scrollTop:newScrollTop},options.delay,"linear")}if(direction==-1)lastTop=current;else lastBottom=current;return true});var _hide=function(e){both_el.hide();timestamp=undefined;scrolltop=0;scrollbottom=0;return true};$(document).on("dragstart",function(e){both_el.show();return true});$(document).on("dragend",_hide);both_el.on("mouseover",_hide)}})(jQuery);
